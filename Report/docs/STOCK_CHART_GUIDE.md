# 股票走势图功能使用指南

## 功能概述

新增的股票走势图功能允许用户通过点击股票名称来查看该股票的历史价格走势。该功能采用全屏抽屉的形式展示，提供清晰的价格趋势可视化。

## 主要特性

### 1. 简洁的折线图设计
- 使用 Recharts 的 LineChart 组件
- 只显示收盘价趋势，避免复杂的技术指标
- 清晰的蓝色线条，易于观察价格变化

### 2. 多时间周期支持
- **1周**: 显示最近一周的价格走势
- **1月**: 显示最近一个月的价格走势  
- **3月**: 显示最近三个月的价格走势
- **6月**: 显示最近六个月的价格走势
- **1年**: 显示最近一年的价格走势

### 3. 全屏抽屉展示
- 从右侧滑出的全屏抽屉
- 充分利用屏幕空间展示图表
- 不遮挡原有的股票列表数据
- 符合现代应用的设计趋势

### 4. 交互式功能
- **点击股票名称**: 触发走势图显示
- **时间周期切换**: 通过下拉选择器快速切换
- **数据刷新**: 手动刷新按钮获取最新数据
- **悬停提示**: 鼠标悬停显示具体价格和日期

## 使用方法

### 步骤1: 查看股票列表
在主界面的股票表格中，可以看到所有关注的股票信息。

### 步骤2: 点击股票名称
点击任意股票的名称（显示为蓝色可点击文本），系统会自动：
- 从右侧滑出全屏抽屉
- 加载该股票的历史数据
- 显示默认1个月的价格走势

### 步骤3: 切换时间周期
在抽屉顶部的下拉选择器中，可以选择不同的时间周期：
- 选择后会自动重新加载对应周期的数据
- 图表会实时更新显示新的价格走势

### 步骤4: 查看详细信息
- **价格变化**: 顶部显示该周期内的价格变化金额和百分比
- **悬停提示**: 鼠标悬停在图表上查看具体日期和价格
- **颜色指示**: 绿色表示上涨，红色表示下跌

### 步骤5: 关闭图表
点击右上角的"关闭"按钮或抽屉外部区域即可关闭走势图。

## 技术特性

### 数据来源
- 使用后端 `/api/stocks/{code}/history` 接口
- 支持多数据源（腾讯、新浪、网易财经）
- 30分钟智能缓存机制

### 性能优化
- 客户端缓存历史数据
- 按需加载，只在点击时获取数据
- 响应式设计，适配不同屏幕尺寸

### 用户体验
- 加载状态指示器
- 错误处理和重试机制
- 平滑的动画过渡效果
- 直观的交互反馈

## 数据格式

API返回的历史数据格式：
```json
{
  "success": true,
  "data": [
    {
      "date": "2024-01-10",
      "close": 28.05,
      "open": 27.80,
      "high": 28.20,
      "low": 27.65,
      "volume": 1234567
    }
  ],
  "count": 30,
  "period": "1m",
  "stock_code": "000001",
  "cache_hit": false
}
```

## 注意事项

1. **网络连接**: 需要稳定的网络连接来获取历史数据
2. **数据延迟**: 历史数据可能有15-30分钟的延迟
3. **缓存机制**: 相同股票和周期的数据会被缓存，减少重复请求
4. **浏览器兼容**: 建议使用现代浏览器以获得最佳体验

## 未来扩展

当前版本是MVP（最小可行产品），后续可以考虑添加：
- 成交量显示
- 技术指标（MA、MACD等）
- 多股票对比
- 自定义时间范围
- 数据导出功能

## 故障排除

### 图表无法显示
1. 检查网络连接
2. 确认后端服务正常运行
3. 尝试刷新数据

### 数据加载缓慢
1. 检查网络速度
2. 尝试切换到较短的时间周期
3. 清除浏览器缓存后重试

### 点击无响应
1. 确认点击的是股票名称而非代码
2. 检查浏览器控制台是否有错误信息
3. 刷新页面后重试