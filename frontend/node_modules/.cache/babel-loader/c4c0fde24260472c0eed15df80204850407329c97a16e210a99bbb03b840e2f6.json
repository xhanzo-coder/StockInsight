{"ast":null,"code":"import React from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{useAuth}from'./contexts/AuthContext';import{ProtectedRoute}from'./components/auth/ProtectedRoute';import{AuthPage}from'./pages/AuthPage';import DashboardPage from'./pages/DashboardPage';import HomePage from'./pages/HomePage';import{Spin}from'antd';import'./App.css';/**\r\n * App组件 - 应用入口点\r\n * 使用AuthContext进行认证管理\r\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const{isAuthenticated,isLoading,user}=useAuth();if(isLoading){return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',height:'100vh',flexDirection:'column',gap:'16px'},children:[/*#__PURE__*/_jsx(Spin,{size:\"large\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'16px',color:'#8b8d97'},children:\"\\u6B63\\u5728\\u68C0\\u67E5\\u767B\\u5F55\\u72B6\\u6001...\"})]});}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomePage,{isLoggedIn:isAuthenticated,userInfo:user||undefined})}),/*#__PURE__*/_jsx(Route,{path:\"/auth\",element:isAuthenticated?/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true}):/*#__PURE__*/_jsx(AuthPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/auth\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/auth\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(DashboardPage,{})})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\"})})]})})});};export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Routes","Route","Navigate","useAuth","ProtectedRoute","AuthPage","DashboardPage","HomePage","Spin","jsx","_jsx","jsxs","_jsxs","App","isAuthenticated","isLoading","user","style","display","justifyContent","alignItems","height","flexDirection","gap","children","size","fontSize","color","className","path","element","isLoggedIn","userInfo","undefined","to","replace"],"sources":["E:/AICode/StockInsight/frontend/src/App.tsx"],"sourcesContent":["import React from 'react';\r\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\r\nimport { useAuth } from './contexts/AuthContext';\r\nimport { ProtectedRoute } from './components/auth/ProtectedRoute';\r\nimport { AuthPage } from './pages/AuthPage';\r\nimport DashboardPage from './pages/DashboardPage';\r\nimport HomePage from './pages/HomePage';\r\nimport { Spin } from 'antd';\r\nimport './App.css';\r\n\r\n/**\r\n * App组件 - 应用入口点\r\n * 使用AuthContext进行认证管理\r\n */\r\nconst App: React.FC = () => {\r\n  const { isAuthenticated, isLoading, user } = useAuth();\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div style={{ \r\n        display: 'flex', \r\n        justifyContent: 'center', \r\n        alignItems: 'center', \r\n        height: '100vh',\r\n        flexDirection: 'column',\r\n        gap: '16px'\r\n      }}>\r\n        <Spin size=\"large\" />\r\n        <div style={{ fontSize: '16px', color: '#8b8d97' }}>正在检查登录状态...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Router>\r\n      <div className=\"App\">\r\n        <Routes>\r\n          {/* 首页路由 */}\r\n          <Route\r\n            path=\"/\"\r\n            element={<HomePage isLoggedIn={isAuthenticated} userInfo={user || undefined} />}\r\n          />\r\n          \r\n          {/* 认证页面路由 */}\r\n          <Route\r\n            path=\"/auth\"\r\n            element={\r\n              isAuthenticated ? (\r\n                <Navigate to=\"/dashboard\" replace />\r\n              ) : (\r\n                <AuthPage />\r\n              )\r\n            }\r\n          />\r\n          \r\n          {/* 兼容旧的登录路由 */}\r\n          <Route\r\n            path=\"/login\"\r\n            element={<Navigate to=\"/auth\" replace />}\r\n          />\r\n          \r\n          {/* 兼容旧的注册路由 */}\r\n          <Route\r\n            path=\"/register\"\r\n            element={<Navigate to=\"/auth\" replace />}\r\n          />\r\n          \r\n          {/* 受保护的仪表盘路由 */}\r\n          <Route\r\n            path=\"/dashboard\"\r\n            element={\r\n              <ProtectedRoute>\r\n                <DashboardPage />\r\n              </ProtectedRoute>\r\n            }\r\n          />\r\n          \r\n          {/* 默认重定向 */}\r\n          <Route path=\"*\" element={<Navigate to=\"/\" />} />\r\n        </Routes>\r\n      </div>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,aAAa,GAAI,CAAAC,MAAM,CAAEC,MAAM,CAAEC,KAAK,CAAEC,QAAQ,KAAQ,kBAAkB,CACnF,OAASC,OAAO,KAAQ,wBAAwB,CAChD,OAASC,cAAc,KAAQ,kCAAkC,CACjE,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,MAAO,CAAAC,aAAa,KAAM,uBAAuB,CACjD,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,OAASC,IAAI,KAAQ,MAAM,CAC3B,MAAO,WAAW,CAElB;AACA;AACA;AACA,GAHA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAIA,KAAM,CAAAC,GAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAEC,eAAe,CAAEC,SAAS,CAAEC,IAAK,CAAC,CAAGb,OAAO,CAAC,CAAC,CAEtD,GAAIY,SAAS,CAAE,CACb,mBACEH,KAAA,QAAKK,KAAK,CAAE,CACVC,OAAO,CAAE,MAAM,CACfC,cAAc,CAAE,QAAQ,CACxBC,UAAU,CAAE,QAAQ,CACpBC,MAAM,CAAE,OAAO,CACfC,aAAa,CAAE,QAAQ,CACvBC,GAAG,CAAE,MACP,CAAE,CAAAC,QAAA,eACAd,IAAA,CAACF,IAAI,EAACiB,IAAI,CAAC,OAAO,CAAE,CAAC,cACrBf,IAAA,QAAKO,KAAK,CAAE,CAAES,QAAQ,CAAE,MAAM,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAAH,QAAA,CAAC,qDAAW,CAAK,CAAC,EAClE,CAAC,CAEV,CAEA,mBACEd,IAAA,CAACX,MAAM,EAAAyB,QAAA,cACLd,IAAA,QAAKkB,SAAS,CAAC,KAAK,CAAAJ,QAAA,cAClBZ,KAAA,CAACZ,MAAM,EAAAwB,QAAA,eAELd,IAAA,CAACT,KAAK,EACJ4B,IAAI,CAAC,GAAG,CACRC,OAAO,cAAEpB,IAAA,CAACH,QAAQ,EAACwB,UAAU,CAAEjB,eAAgB,CAACkB,QAAQ,CAAEhB,IAAI,EAAIiB,SAAU,CAAE,CAAE,CACjF,CAAC,cAGFvB,IAAA,CAACT,KAAK,EACJ4B,IAAI,CAAC,OAAO,CACZC,OAAO,CACLhB,eAAe,cACbJ,IAAA,CAACR,QAAQ,EAACgC,EAAE,CAAC,YAAY,CAACC,OAAO,MAAE,CAAC,cAEpCzB,IAAA,CAACL,QAAQ,GAAE,CAEd,CACF,CAAC,cAGFK,IAAA,CAACT,KAAK,EACJ4B,IAAI,CAAC,QAAQ,CACbC,OAAO,cAAEpB,IAAA,CAACR,QAAQ,EAACgC,EAAE,CAAC,OAAO,CAACC,OAAO,MAAE,CAAE,CAC1C,CAAC,cAGFzB,IAAA,CAACT,KAAK,EACJ4B,IAAI,CAAC,WAAW,CAChBC,OAAO,cAAEpB,IAAA,CAACR,QAAQ,EAACgC,EAAE,CAAC,OAAO,CAACC,OAAO,MAAE,CAAE,CAC1C,CAAC,cAGFzB,IAAA,CAACT,KAAK,EACJ4B,IAAI,CAAC,YAAY,CACjBC,OAAO,cACLpB,IAAA,CAACN,cAAc,EAAAoB,QAAA,cACbd,IAAA,CAACJ,aAAa,GAAE,CAAC,CACH,CACjB,CACF,CAAC,cAGFI,IAAA,CAACT,KAAK,EAAC4B,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEpB,IAAA,CAACR,QAAQ,EAACgC,EAAE,CAAC,GAAG,CAAE,CAAE,CAAE,CAAC,EAC1C,CAAC,CACN,CAAC,CACA,CAAC,CAEb,CAAC,CAED,cAAe,CAAArB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}