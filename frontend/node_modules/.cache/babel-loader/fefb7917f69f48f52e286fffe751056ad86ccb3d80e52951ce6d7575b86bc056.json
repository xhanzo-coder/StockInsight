{"ast":null,"code":"/**\n * è®¤è¯æœåŠ¡\n * å¤„ç†ç”¨æˆ·ç™»å½•ã€æ³¨å†Œã€ä»¤ç‰Œç®¡ç†ç­‰åŠŸèƒ½\n * å¢å¼ºçš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶\n */import axios from'axios';import{message}from'antd';import{tokenManager}from'./api';// è®¤è¯APIåŸºç¡€URL\nconst AUTH_API_URL='http://localhost:5000/api/auth';// æœ¬åœ°å­˜å‚¨é”®\nconst USER_INFO_KEY='userInfo';const AUTH_LAST_VERIFIED_KEY='auth_last_verified';// é…ç½®å¸¸é‡\nconst REQUEST_TIMEOUT=15000;// è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰\nconst MAX_RETRY_COUNT=2;// æœ€å¤§é‡è¯•æ¬¡æ•°\nconst RETRY_DELAY=1000;// é‡è¯•å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰\n// åˆ›å»ºè®¤è¯ä¸“ç”¨çš„ axios å®ä¾‹\nconst authApi=axios.create({baseURL:AUTH_API_URL,timeout:REQUEST_TIMEOUT,headers:{'Content-Type':'application/json'}});// è¯·æ±‚é‡è¯•å‡½æ•°\nconst retryAuthRequest=async function(config){let retryCount=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;try{return await axios(config);}catch(error){// åªæœ‰åœ¨ç½‘ç»œé”™è¯¯æˆ–5xxæœåŠ¡å™¨é”™è¯¯æ—¶é‡è¯•\nconst isNetworkError=!error.response;const isServerError=error.response&&error.response.status>=500;if((isNetworkError||isServerError)&&retryCount<MAX_RETRY_COUNT){console.log(`è®¤è¯è¯·æ±‚å¤±è´¥ï¼Œ${RETRY_DELAY/1000}ç§’åé‡è¯• (${retryCount+1}/${MAX_RETRY_COUNT})`);await new Promise(resolve=>setTimeout(resolve,RETRY_DELAY));return retryAuthRequest(config,retryCount+1);}throw error;}};// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨ - è‡ªåŠ¨æ·»åŠ tokenåˆ°è¯·æ±‚å¤´\nauthApi.interceptors.request.use(config=>{const token=tokenManager.getToken();if(token){config.headers=config.headers||{};config.headers.Authorization=`Bearer ${token}`;}// æ·»åŠ è¯·æ±‚æ—¶é—´æˆ³ï¼Œç”¨äºè°ƒè¯•\nconfig.headers=config.headers||{};config.headers['X-Request-Time']=new Date().toISOString();// è®°å½•è¯·æ±‚ä¿¡æ¯ï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰\nif(process.env.NODE_ENV==='development'){var _config$method;console.log(`ğŸ” è®¤è¯è¯·æ±‚: ${(_config$method=config.method)===null||_config$method===void 0?void 0:_config$method.toUpperCase()} ${config.url}`,{headers:{...config.headers,Authorization:token?'å·²è®¾ç½®':'æœªè®¾ç½®'},data:config.data,params:config.params});}return config;},error=>{console.error('è®¤è¯è¯·æ±‚æ‹¦æˆªå™¨é”™è¯¯:',error);return Promise.reject(error);});// æ·»åŠ å“åº”æ‹¦æˆªå™¨ - å¤„ç†tokenè¿‡æœŸ\nauthApi.interceptors.response.use(response=>{// è®°å½•å“åº”ä¿¡æ¯ï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰\nif(process.env.NODE_ENV==='development'){var _response$config$meth;console.log(`âœ… è®¤è¯å“åº”æˆåŠŸ: ${(_response$config$meth=response.config.method)===null||_response$config$meth===void 0?void 0:_response$config$meth.toUpperCase()} ${response.config.url}`,{status:response.status,data:response.data});}return response;},error=>{// è·å–è¯·æ±‚é…ç½®å’Œå“åº”\nconst{config,response}=error;// è®°å½•é”™è¯¯ä¿¡æ¯ï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰\nif(process.env.NODE_ENV==='development'){var _config$method2;console.error(`âŒ è®¤è¯è¯·æ±‚å¤±è´¥: ${config===null||config===void 0?void 0:(_config$method2=config.method)===null||_config$method2===void 0?void 0:_config$method2.toUpperCase()} ${config===null||config===void 0?void 0:config.url}`,{status:response===null||response===void 0?void 0:response.status,data:response===null||response===void 0?void 0:response.data,error:error.message});}// å¤„ç†401é”™è¯¯ï¼ˆæœªæˆæƒï¼Œé€šå¸¸æ˜¯tokenè¿‡æœŸæˆ–æ— æ•ˆï¼‰\nif((response===null||response===void 0?void 0:response.status)===401){console.warn('è®¤è¯è¯·æ±‚æ”¶åˆ°401æœªæˆæƒå“åº”');// æ¸…é™¤è®¤è¯ç›¸å…³æ•°æ®\ntokenManager.removeToken();localStorage.removeItem(USER_INFO_KEY);localStorage.removeItem(AUTH_LAST_VERIFIED_KEY);// å¦‚æœä¸æ˜¯éªŒè¯æ¥å£çš„è¯·æ±‚ï¼Œæ˜¾ç¤ºæç¤ºå¹¶é‡å®šå‘\nif((config===null||config===void 0?void 0:config.url)!=='/verify'){message.error('ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•');// ä½¿ç”¨å»¶è¿Ÿé‡å®šå‘ï¼Œç¡®ä¿æ¶ˆæ¯èƒ½å¤Ÿæ˜¾ç¤º\nsetTimeout(()=>{// ä¿å­˜å½“å‰URLï¼Œä»¥ä¾¿ç™»å½•åè¿”å›\nconst currentPath=window.location.pathname;if(currentPath!=='/login'){sessionStorage.setItem('redirectAfterLogin',currentPath);}window.location.href='/login';},1500);}}return Promise.reject(error);});// ç”¨æˆ·æ•°æ®ç±»å‹\n// ç™»å½•è¯·æ±‚æ•°æ®\n// æ³¨å†Œè¯·æ±‚æ•°æ®\n// è®¤è¯å“åº”æ•°æ®\n// API å“åº”æ ¼å¼\n// è®¤è¯æœåŠ¡ç±»\nexport class AuthService{/**\n   * ç”¨æˆ·æ³¨å†Œ\n   */async register(userData){try{// ä½¿ç”¨é‡è¯•æœºåˆ¶å‘é€è¯·æ±‚\nconst response=await retryAuthRequest({method:'post',url:`${AUTH_API_URL}/register`,data:userData,headers:{'Content-Type':'application/json'}});const data=response.data;if(data.success&&data.data){// ä¿å­˜ä»¤ç‰Œ - åç«¯è¿”å›çš„æ˜¯tokenå­—æ®µ\ntokenManager.setToken(data.data.token);// ä¿å­˜ç”¨æˆ·ä¿¡æ¯å’ŒéªŒè¯æ—¶é—´\nlocalStorage.setItem(USER_INFO_KEY,JSON.stringify(data.data.user));localStorage.setItem(AUTH_LAST_VERIFIED_KEY,Date.now().toString());message.success('æ³¨å†ŒæˆåŠŸï¼');return data;}else{message.error(data.message||'æ³¨å†Œå¤±è´¥');return data;}}catch(error){var _error$response,_error$response2,_error$response2$data;console.error('æ³¨å†Œå¤±è´¥:',((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);// æ£€æŸ¥æ˜¯å¦ä¸ºç½‘ç»œé”™è¯¯\nconst isNetworkError=!error.response;if(isNetworkError){const errorMessage='ç½‘ç»œè¿æ¥é”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥';message.error(errorMessage);return{success:false,message:errorMessage,networkError:true};}const errorMessage=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'æ³¨å†Œå¤±è´¥ï¼Œè¯·é‡è¯•';message.error(errorMessage);return{success:false,message:errorMessage,error:error.message};}}/**\n   * ç”¨æˆ·ç™»å½•\n   */async login(credentials){try{console.log('å¼€å§‹ç™»å½•è¯·æ±‚:',credentials);console.log('API URL:',AUTH_API_URL);// ä½¿ç”¨é‡è¯•æœºåˆ¶å‘é€è¯·æ±‚\nconst response=await retryAuthRequest({method:'post',url:`${AUTH_API_URL}/login`,data:credentials,headers:{'Content-Type':'application/json'}});console.log('ç™»å½•å“åº”:',response.data);const data=response.data;if(data.success&&data.data){// ä¿å­˜ä»¤ç‰Œåˆ°localStorage - åç«¯è¿”å›çš„æ˜¯tokenå­—æ®µ\ntokenManager.setToken(data.data.token);// ä¿å­˜ç”¨æˆ·ä¿¡æ¯å’ŒéªŒè¯æ—¶é—´\nlocalStorage.setItem(USER_INFO_KEY,JSON.stringify(data.data.user));localStorage.setItem(AUTH_LAST_VERIFIED_KEY,Date.now().toString());// æ£€æŸ¥æ˜¯å¦æœ‰ç™»å½•åé‡å®šå‘è·¯å¾„\nconst redirectPath=sessionStorage.getItem('redirectAfterLogin');if(redirectPath){console.log(`ç™»å½•æˆåŠŸï¼Œå°†é‡å®šå‘åˆ°: ${redirectPath}`);sessionStorage.removeItem('redirectAfterLogin');}message.success('ç™»å½•æˆåŠŸï¼');return data;}else{console.error('ç™»å½•å¤±è´¥:',data.message);message.error(data.message||'ç™»å½•å¤±è´¥');return data;}}catch(error){var _error$response3,_error$response4,_error$response5,_error$response5$data;console.error('ç™»å½•è¯·æ±‚å¼‚å¸¸:',error);console.error('é”™è¯¯å“åº”:',(_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.data);// æ£€æŸ¥æ˜¯å¦ä¸ºç½‘ç»œé”™è¯¯\nconst isNetworkError=!error.response;if(isNetworkError){const errorMessage='ç½‘ç»œè¿æ¥é”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥';message.error(errorMessage);return{success:false,message:errorMessage,networkError:true};}// å¤„ç†ç‰¹å®šé”™è¯¯\nif(((_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.status)===401){const errorMessage='ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯';message.error(errorMessage);return{success:false,message:errorMessage,error:error.message};}const errorMessage=((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.message)||'ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•';message.error(errorMessage);return{success:false,message:errorMessage,error:error.message};}}/**\n   * éªŒè¯ä»¤ç‰Œ\n   */async verifyToken(){try{const token=tokenManager.getToken();if(!token){console.log('æ²¡æœ‰æ‰¾åˆ°tokenï¼Œæ— æ³•éªŒè¯');return{success:false};}console.log('å¼€å§‹éªŒè¯token...',token.substring(0,15)+'...');console.log('Tokenæ ¼å¼æ£€æŸ¥:',token.split('.').length===3?'æœ‰æ•ˆ':'æ— æ•ˆ');// ç›´æ¥æ£€æŸ¥tokenæ˜¯å¦æœ‰æ•ˆ\nif(!tokenManager.isAuthenticated()){console.warn('æœ¬åœ°tokenéªŒè¯å¤±è´¥ï¼Œå¯èƒ½å·²è¿‡æœŸ');tokenManager.removeToken();localStorage.removeItem(USER_INFO_KEY);localStorage.removeItem(AUTH_LAST_VERIFIED_KEY);return{success:false};}// æ£€æŸ¥æ˜¯å¦æœ‰æœ¬åœ°å­˜å‚¨çš„ç”¨æˆ·ä¿¡æ¯\nconst storedUserInfo=localStorage.getItem(USER_INFO_KEY);let localUser=null;if(storedUserInfo){try{localUser=JSON.parse(storedUserInfo);console.log('ä»æœ¬åœ°å­˜å‚¨æ¢å¤ç”¨æˆ·ä¿¡æ¯:',localUser);}catch(e){console.error('è§£ææœ¬åœ°ç”¨æˆ·ä¿¡æ¯å¤±è´¥:',e);}}// ä½¿ç”¨é‡è¯•æœºåˆ¶å‘é€è¯·æ±‚\nconsole.log(`å‘é€éªŒè¯è¯·æ±‚åˆ°: ${AUTH_API_URL}/verify`);const response=await retryAuthRequest({method:'get',url:`${AUTH_API_URL}/verify`,headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'},timeout:5000// é™ä½è¶…æ—¶æ—¶é—´ï¼ŒåŠ å¿«éªŒè¯é€Ÿåº¦\n});// è¯·æ±‚æ‹¦æˆªå™¨ä¼šè‡ªåŠ¨æ·»åŠ Authorizationå¤´\nconst data=response.data;console.log('éªŒè¯å“åº”:',data);if(data.success&&data.data&&data.data.user){console.log('TokenéªŒè¯æˆåŠŸï¼Œç”¨æˆ·ä¿¡æ¯:',data.data.user);// æ›´æ–°éªŒè¯æ—¶é—´å’Œç”¨æˆ·ä¿¡æ¯\nlocalStorage.setItem(AUTH_LAST_VERIFIED_KEY,Date.now().toString());localStorage.setItem(USER_INFO_KEY,JSON.stringify(data.data.user));return{success:true,user:data.data.user};}else{console.log('TokenéªŒè¯å¤±è´¥ï¼ŒæœåŠ¡å™¨è¿”å›:',data);tokenManager.removeToken();localStorage.removeItem(USER_INFO_KEY);localStorage.removeItem(AUTH_LAST_VERIFIED_KEY);return{success:false};}}catch(error){var _error$response6,_error$response7;console.error('ä»¤ç‰ŒéªŒè¯å¤±è´¥:',error);console.error('é”™è¯¯çŠ¶æ€ç :',(_error$response6=error.response)===null||_error$response6===void 0?void 0:_error$response6.status);console.error('é”™è¯¯è¯¦æƒ…:',(_error$response7=error.response)===null||_error$response7===void 0?void 0:_error$response7.data);// æ£€æŸ¥æ˜¯å¦ä¸ºç½‘ç»œé”™è¯¯\nconst isNetworkError=!error.response;if(isNetworkError){console.warn('éªŒè¯token: ç½‘ç»œé”™è¯¯ï¼Œæ£€æŸ¥æœ¬åœ°ç”¨æˆ·ä¿¡æ¯');// ç½‘ç»œé”™è¯¯æ—¶ï¼Œå¦‚æœæœ‰æœ¬åœ°ç”¨æˆ·ä¿¡æ¯ï¼Œå°è¯•ä½¿ç”¨æœ¬åœ°ä¿¡æ¯\nconst storedUserInfo=localStorage.getItem(USER_INFO_KEY);if(storedUserInfo&&tokenManager.isAuthenticated()){try{const user=JSON.parse(storedUserInfo);console.log('ç½‘ç»œé”™è¯¯ï¼Œä½¿ç”¨æœ¬åœ°ç”¨æˆ·ä¿¡æ¯:',user);return{success:true,user:user,networkError:true};}catch(e){console.error('è§£ææœ¬åœ°ç”¨æˆ·ä¿¡æ¯å¤±è´¥:',e);}}return{success:false,networkError:true};}// æ¸…é™¤æ— æ•ˆçš„tokenï¼ˆé™¤éæ˜¯ç½‘ç»œé”™è¯¯ï¼‰\nif(!isNetworkError){tokenManager.removeToken();localStorage.removeItem(USER_INFO_KEY);localStorage.removeItem(AUTH_LAST_VERIFIED_KEY);}return{success:false};}}/**\n   * è·å–ç”¨æˆ·èµ„æ–™\n   */async getProfile(){try{const token=tokenManager.getToken();if(!token){return{success:false};}// ä½¿ç”¨é‡è¯•æœºåˆ¶å‘é€è¯·æ±‚\nconst response=await retryAuthRequest({method:'get',url:`${AUTH_API_URL}/profile`,headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});// è¯·æ±‚æ‹¦æˆªå™¨ä¼šè‡ªåŠ¨æ·»åŠ Authorizationå¤´\nconst data=response.data;if(data.success&&data.data&&data.data.user){// æ›´æ–°ç”¨æˆ·ä¿¡æ¯å’ŒéªŒè¯æ—¶é—´\nlocalStorage.setItem(USER_INFO_KEY,JSON.stringify(data.data.user));localStorage.setItem(AUTH_LAST_VERIFIED_KEY,Date.now().toString());return{success:true,user:data.data.user};}else{return{success:false};}}catch(error){var _error$response8;console.error('è·å–ç”¨æˆ·èµ„æ–™å¤±è´¥:',error);// æ£€æŸ¥æ˜¯å¦ä¸ºç½‘ç»œé”™è¯¯\nconst isNetworkError=!error.response;if(isNetworkError){return{success:false,networkError:true};}// å¦‚æœæ˜¯401é”™è¯¯ï¼Œæ¸…é™¤è®¤è¯çŠ¶æ€\nif(((_error$response8=error.response)===null||_error$response8===void 0?void 0:_error$response8.status)===401){tokenManager.removeToken();localStorage.removeItem(USER_INFO_KEY);localStorage.removeItem(AUTH_LAST_VERIFIED_KEY);}return{success:false};}}/**\n   * ç”¨æˆ·ç™»å‡º\n   */async logout(){try{const token=tokenManager.getToken();if(token){try{// å¯é€‰ï¼šè°ƒç”¨åç«¯ç™»å‡ºæ¥å£\nawait authApi.post('/logout');// æ³¨æ„ï¼šç”±äºæ·»åŠ äº†è¯·æ±‚æ‹¦æˆªå™¨ï¼Œè¿™é‡Œä¸éœ€è¦æ‰‹åŠ¨æ·»åŠ Authorizationå¤´\nconsole.log('æˆåŠŸè°ƒç”¨ç™»å‡ºAPI');}catch(error){console.warn('ç™»å‡ºAPIè°ƒç”¨å¤±è´¥ï¼Œä½†ä¼šç»§ç»­æ¸…é™¤æœ¬åœ°çŠ¶æ€:',error);}}// æ— è®ºå¦‚ä½•éƒ½è¦æ¸…é™¤æœ¬åœ°ä»¤ç‰Œå’Œç”¨æˆ·ä¿¡æ¯\ntokenManager.removeToken();localStorage.removeItem(USER_INFO_KEY);localStorage.removeItem(AUTH_LAST_VERIFIED_KEY);return{success:true,message:'å·²å®‰å…¨é€€å‡ºç™»å½•'};}catch(error){console.error('ç™»å‡ºè¿‡ç¨‹å‡ºé”™:',error);// å³ä½¿å‡ºé”™ï¼Œä¹Ÿè¦å°è¯•æ¸…é™¤æœ¬åœ°çŠ¶æ€\ntry{tokenManager.removeToken();localStorage.removeItem(USER_INFO_KEY);localStorage.removeItem(AUTH_LAST_VERIFIED_KEY);}catch(e){console.error('æ¸…é™¤æœ¬åœ°çŠ¶æ€å¤±è´¥:',e);}return{success:false,message:'ç™»å‡ºè¿‡ç¨‹å‡ºé”™ï¼Œä½†å·²æ¸…é™¤æœ¬åœ°ç™»å½•çŠ¶æ€'};}}/**\n   * æ£€æŸ¥æ˜¯å¦å·²è®¤è¯\n   */isAuthenticated(){return tokenManager.isAuthenticated();}/**\n   * æ£€æŸ¥è®¤è¯çŠ¶æ€ï¼ˆæœ¬åœ°æ£€æŸ¥ï¼Œä¸å‘é€ç½‘ç»œè¯·æ±‚ï¼‰\n   */checkAuthStatus(){const isAuthenticated=this.isAuthenticated();let user=null;// å¦‚æœæœ‰tokenï¼Œå°è¯•ä»localStorageè·å–ç”¨æˆ·ä¿¡æ¯\nif(isAuthenticated){try{const userInfo=localStorage.getItem(USER_INFO_KEY);if(userInfo){user=JSON.parse(userInfo);}}catch(e){console.error('è§£æç”¨æˆ·ä¿¡æ¯å¤±è´¥:',e);}}return{isAuthenticated,user};}}export const authService=new AuthService();","map":{"version":3,"names":["axios","message","tokenManager","AUTH_API_URL","USER_INFO_KEY","AUTH_LAST_VERIFIED_KEY","REQUEST_TIMEOUT","MAX_RETRY_COUNT","RETRY_DELAY","authApi","create","baseURL","timeout","headers","retryAuthRequest","config","retryCount","arguments","length","undefined","error","isNetworkError","response","isServerError","status","console","log","Promise","resolve","setTimeout","interceptors","request","use","token","getToken","Authorization","Date","toISOString","process","env","NODE_ENV","_config$method","method","toUpperCase","url","data","params","reject","_response$config$meth","_config$method2","warn","removeToken","localStorage","removeItem","currentPath","window","location","pathname","sessionStorage","setItem","href","AuthService","register","userData","success","setToken","JSON","stringify","user","now","toString","_error$response","_error$response2","_error$response2$data","errorMessage","networkError","login","credentials","redirectPath","getItem","_error$response3","_error$response4","_error$response5","_error$response5$data","verifyToken","substring","split","isAuthenticated","storedUserInfo","localUser","parse","e","_error$response6","_error$response7","getProfile","_error$response8","logout","post","checkAuthStatus","userInfo","authService"],"sources":["E:/AICode/StockInsight/frontend/src/services/authService.ts"],"sourcesContent":["/**\n * è®¤è¯æœåŠ¡\n * å¤„ç†ç”¨æˆ·ç™»å½•ã€æ³¨å†Œã€ä»¤ç‰Œç®¡ç†ç­‰åŠŸèƒ½\n * å¢å¼ºçš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶\n */\n\nimport axios, { AxiosError, AxiosRequestConfig, AxiosResponse } from 'axios';\nimport { message } from 'antd';\nimport { tokenManager } from './api';\n\n// è®¤è¯APIåŸºç¡€URL\nconst AUTH_API_URL = 'http://localhost:5000/api/auth';\n\n// æœ¬åœ°å­˜å‚¨é”®\nconst USER_INFO_KEY = 'userInfo';\nconst AUTH_LAST_VERIFIED_KEY = 'auth_last_verified';\n\n// é…ç½®å¸¸é‡\nconst REQUEST_TIMEOUT = 15000; // è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰\nconst MAX_RETRY_COUNT = 2; // æœ€å¤§é‡è¯•æ¬¡æ•°\nconst RETRY_DELAY = 1000; // é‡è¯•å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰\n\n// åˆ›å»ºè®¤è¯ä¸“ç”¨çš„ axios å®ä¾‹\nconst authApi = axios.create({\n  baseURL: AUTH_API_URL,\n  timeout: REQUEST_TIMEOUT,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// è¯·æ±‚é‡è¯•å‡½æ•°\nconst retryAuthRequest = async (config: AxiosRequestConfig, retryCount: number = 0): Promise<AxiosResponse> => {\n  try {\n    return await axios(config);\n  } catch (error: any) {\n    // åªæœ‰åœ¨ç½‘ç»œé”™è¯¯æˆ–5xxæœåŠ¡å™¨é”™è¯¯æ—¶é‡è¯•\n    const isNetworkError = !error.response;\n    const isServerError = error.response && error.response.status >= 500;\n    \n    if ((isNetworkError || isServerError) && retryCount < MAX_RETRY_COUNT) {\n      console.log(`è®¤è¯è¯·æ±‚å¤±è´¥ï¼Œ${RETRY_DELAY/1000}ç§’åé‡è¯• (${retryCount + 1}/${MAX_RETRY_COUNT})`);\n      await new Promise(resolve => setTimeout(resolve, RETRY_DELAY));\n      return retryAuthRequest(config, retryCount + 1);\n    }\n    \n    throw error;\n  }\n};\n\n// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨ - è‡ªåŠ¨æ·»åŠ tokenåˆ°è¯·æ±‚å¤´\nauthApi.interceptors.request.use(\n  (config) => {\n    const token = tokenManager.getToken();\n    if (token) {\n      config.headers = config.headers || {};\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    \n    // æ·»åŠ è¯·æ±‚æ—¶é—´æˆ³ï¼Œç”¨äºè°ƒè¯•\n    config.headers = config.headers || {};\n    config.headers['X-Request-Time'] = new Date().toISOString();\n    \n    // è®°å½•è¯·æ±‚ä¿¡æ¯ï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰\n    if (process.env.NODE_ENV === 'development') {\n      console.log(`ğŸ” è®¤è¯è¯·æ±‚: ${config.method?.toUpperCase()} ${config.url}`, {\n        headers: { ...config.headers, Authorization: token ? 'å·²è®¾ç½®' : 'æœªè®¾ç½®' },\n        data: config.data,\n        params: config.params\n      });\n    }\n    \n    return config;\n  },\n  (error) => {\n    console.error('è®¤è¯è¯·æ±‚æ‹¦æˆªå™¨é”™è¯¯:', error);\n    return Promise.reject(error);\n  }\n);\n\n// æ·»åŠ å“åº”æ‹¦æˆªå™¨ - å¤„ç†tokenè¿‡æœŸ\nauthApi.interceptors.response.use(\n  (response) => {\n    // è®°å½•å“åº”ä¿¡æ¯ï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰\n    if (process.env.NODE_ENV === 'development') {\n      console.log(`âœ… è®¤è¯å“åº”æˆåŠŸ: ${response.config.method?.toUpperCase()} ${response.config.url}`, {\n        status: response.status,\n        data: response.data\n      });\n    }\n    \n    return response;\n  },\n  (error: AxiosError) => {\n    // è·å–è¯·æ±‚é…ç½®å’Œå“åº”\n    const { config, response } = error;\n    \n    // è®°å½•é”™è¯¯ä¿¡æ¯ï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰\n    if (process.env.NODE_ENV === 'development') {\n      console.error(`âŒ è®¤è¯è¯·æ±‚å¤±è´¥: ${config?.method?.toUpperCase()} ${config?.url}`, {\n        status: response?.status,\n        data: response?.data,\n        error: error.message\n      });\n    }\n    \n    // å¤„ç†401é”™è¯¯ï¼ˆæœªæˆæƒï¼Œé€šå¸¸æ˜¯tokenè¿‡æœŸæˆ–æ— æ•ˆï¼‰\n    if (response?.status === 401) {\n      console.warn('è®¤è¯è¯·æ±‚æ”¶åˆ°401æœªæˆæƒå“åº”');\n      \n      // æ¸…é™¤è®¤è¯ç›¸å…³æ•°æ®\n      tokenManager.removeToken();\n      localStorage.removeItem(USER_INFO_KEY);\n      localStorage.removeItem(AUTH_LAST_VERIFIED_KEY);\n      \n      // å¦‚æœä¸æ˜¯éªŒè¯æ¥å£çš„è¯·æ±‚ï¼Œæ˜¾ç¤ºæç¤ºå¹¶é‡å®šå‘\n      if (config?.url !== '/verify') {\n        message.error('ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•');\n        \n        // ä½¿ç”¨å»¶è¿Ÿé‡å®šå‘ï¼Œç¡®ä¿æ¶ˆæ¯èƒ½å¤Ÿæ˜¾ç¤º\n        setTimeout(() => {\n          // ä¿å­˜å½“å‰URLï¼Œä»¥ä¾¿ç™»å½•åè¿”å›\n          const currentPath = window.location.pathname;\n          if (currentPath !== '/login') {\n            sessionStorage.setItem('redirectAfterLogin', currentPath);\n          }\n          \n          window.location.href = '/login';\n        }, 1500);\n      }\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\n// ç”¨æˆ·æ•°æ®ç±»å‹\nexport interface User {\n  id: number;\n  username: string;\n  email: string;\n  created_at: string;\n  last_login?: string;\n}\n\n// ç™»å½•è¯·æ±‚æ•°æ®\nexport interface LoginRequest {\n  username: string;\n  password: string;\n}\n\n// æ³¨å†Œè¯·æ±‚æ•°æ®\nexport interface RegisterRequest {\n  username: string;\n  email: string;\n  password: string;\n}\n\n// è®¤è¯å“åº”æ•°æ®\nexport interface AuthResponse {\n  user: User;\n  token: string; // åç«¯è¿”å›çš„æ˜¯tokenå­—æ®µï¼Œè€Œä¸æ˜¯access_token\n}\n\n// API å“åº”æ ¼å¼\nexport interface ApiResponse<T> {\n  success: boolean;\n  data?: T;\n  message?: string;\n  error?: string;\n  networkError?: boolean;\n}\n\n// è®¤è¯æœåŠ¡ç±»\nexport class AuthService {\n\n  /**\n   * ç”¨æˆ·æ³¨å†Œ\n   */\n  async register(userData: RegisterRequest): Promise<ApiResponse<AuthResponse>> {\n    try {\n      // ä½¿ç”¨é‡è¯•æœºåˆ¶å‘é€è¯·æ±‚\n      const response = await retryAuthRequest({\n        method: 'post',\n        url: `${AUTH_API_URL}/register`,\n        data: userData,\n        headers: { 'Content-Type': 'application/json' }\n      });\n      \n      const data = response.data;\n\n      if (data.success && data.data) {\n        // ä¿å­˜ä»¤ç‰Œ - åç«¯è¿”å›çš„æ˜¯tokenå­—æ®µ\n        tokenManager.setToken(data.data.token);\n        \n        // ä¿å­˜ç”¨æˆ·ä¿¡æ¯å’ŒéªŒè¯æ—¶é—´\n        localStorage.setItem(USER_INFO_KEY, JSON.stringify(data.data.user));\n        localStorage.setItem(AUTH_LAST_VERIFIED_KEY, Date.now().toString());\n        \n        message.success('æ³¨å†ŒæˆåŠŸï¼');\n        return data;\n      } else {\n        message.error(data.message || 'æ³¨å†Œå¤±è´¥');\n        return data;\n      }\n    } catch (error: any) {\n      console.error('æ³¨å†Œå¤±è´¥:', error.response?.data || error.message);\n      \n      // æ£€æŸ¥æ˜¯å¦ä¸ºç½‘ç»œé”™è¯¯\n      const isNetworkError = !error.response;\n      if (isNetworkError) {\n        const errorMessage = 'ç½‘ç»œè¿æ¥é”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥';\n        message.error(errorMessage);\n        return {\n          success: false,\n          message: errorMessage,\n          networkError: true\n        };\n      }\n      \n      const errorMessage = error.response?.data?.message || 'æ³¨å†Œå¤±è´¥ï¼Œè¯·é‡è¯•';\n      message.error(errorMessage);\n      return {\n        success: false,\n        message: errorMessage,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * ç”¨æˆ·ç™»å½•\n   */\n  async login(credentials: LoginRequest): Promise<ApiResponse<AuthResponse>> {\n    try {\n      console.log('å¼€å§‹ç™»å½•è¯·æ±‚:', credentials);\n      console.log('API URL:', AUTH_API_URL);\n      \n      // ä½¿ç”¨é‡è¯•æœºåˆ¶å‘é€è¯·æ±‚\n      const response = await retryAuthRequest({\n        method: 'post',\n        url: `${AUTH_API_URL}/login`,\n        data: credentials,\n        headers: { 'Content-Type': 'application/json' }\n      });\n      \n      console.log('ç™»å½•å“åº”:', response.data);\n      \n      const data = response.data;\n\n      if (data.success && data.data) {\n        // ä¿å­˜ä»¤ç‰Œåˆ°localStorage - åç«¯è¿”å›çš„æ˜¯tokenå­—æ®µ\n        tokenManager.setToken(data.data.token);\n        \n        // ä¿å­˜ç”¨æˆ·ä¿¡æ¯å’ŒéªŒè¯æ—¶é—´\n        localStorage.setItem(USER_INFO_KEY, JSON.stringify(data.data.user));\n        localStorage.setItem(AUTH_LAST_VERIFIED_KEY, Date.now().toString());\n        \n        // æ£€æŸ¥æ˜¯å¦æœ‰ç™»å½•åé‡å®šå‘è·¯å¾„\n        const redirectPath = sessionStorage.getItem('redirectAfterLogin');\n        if (redirectPath) {\n          console.log(`ç™»å½•æˆåŠŸï¼Œå°†é‡å®šå‘åˆ°: ${redirectPath}`);\n          sessionStorage.removeItem('redirectAfterLogin');\n        }\n        \n        message.success('ç™»å½•æˆåŠŸï¼');\n        return data;\n      } else {\n        console.error('ç™»å½•å¤±è´¥:', data.message);\n        message.error(data.message || 'ç™»å½•å¤±è´¥');\n        return data;\n      }\n    } catch (error: any) {\n      console.error('ç™»å½•è¯·æ±‚å¼‚å¸¸:', error);\n      console.error('é”™è¯¯å“åº”:', error.response?.data);\n      \n      // æ£€æŸ¥æ˜¯å¦ä¸ºç½‘ç»œé”™è¯¯\n      const isNetworkError = !error.response;\n      if (isNetworkError) {\n        const errorMessage = 'ç½‘ç»œè¿æ¥é”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥';\n        message.error(errorMessage);\n        return {\n          success: false,\n          message: errorMessage,\n          networkError: true\n        };\n      }\n      \n      // å¤„ç†ç‰¹å®šé”™è¯¯\n      if (error.response?.status === 401) {\n        const errorMessage = 'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯';\n        message.error(errorMessage);\n        return {\n          success: false,\n          message: errorMessage,\n          error: error.message\n        };\n      }\n      \n      const errorMessage = error.response?.data?.message || 'ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•';\n      message.error(errorMessage);\n      return {\n        success: false,\n        message: errorMessage,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * éªŒè¯ä»¤ç‰Œ\n   */\n  async verifyToken(): Promise<{ success: boolean; user?: User; networkError?: boolean }> {\n    try {\n      const token = tokenManager.getToken();\n      if (!token) {\n        console.log('æ²¡æœ‰æ‰¾åˆ°tokenï¼Œæ— æ³•éªŒè¯');\n        return { success: false };\n      }\n\n      console.log('å¼€å§‹éªŒè¯token...', token.substring(0, 15) + '...');\n      console.log('Tokenæ ¼å¼æ£€æŸ¥:', token.split('.').length === 3 ? 'æœ‰æ•ˆ' : 'æ— æ•ˆ');\n      \n      // ç›´æ¥æ£€æŸ¥tokenæ˜¯å¦æœ‰æ•ˆ\n      if (!tokenManager.isAuthenticated()) {\n        console.warn('æœ¬åœ°tokenéªŒè¯å¤±è´¥ï¼Œå¯èƒ½å·²è¿‡æœŸ');\n        tokenManager.removeToken();\n        localStorage.removeItem(USER_INFO_KEY);\n        localStorage.removeItem(AUTH_LAST_VERIFIED_KEY);\n        return { success: false };\n      }\n      \n      // æ£€æŸ¥æ˜¯å¦æœ‰æœ¬åœ°å­˜å‚¨çš„ç”¨æˆ·ä¿¡æ¯\n      const storedUserInfo = localStorage.getItem(USER_INFO_KEY);\n      let localUser: User | null = null;\n      \n      if (storedUserInfo) {\n        try {\n          localUser = JSON.parse(storedUserInfo);\n          console.log('ä»æœ¬åœ°å­˜å‚¨æ¢å¤ç”¨æˆ·ä¿¡æ¯:', localUser);\n        } catch (e) {\n          console.error('è§£ææœ¬åœ°ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', e);\n        }\n      }\n      \n      // ä½¿ç”¨é‡è¯•æœºåˆ¶å‘é€è¯·æ±‚\n      console.log(`å‘é€éªŒè¯è¯·æ±‚åˆ°: ${AUTH_API_URL}/verify`);\n      const response = await retryAuthRequest({\n        method: 'get',\n        url: `${AUTH_API_URL}/verify`,\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        timeout: 5000 // é™ä½è¶…æ—¶æ—¶é—´ï¼ŒåŠ å¿«éªŒè¯é€Ÿåº¦\n      });\n      \n      // è¯·æ±‚æ‹¦æˆªå™¨ä¼šè‡ªåŠ¨æ·»åŠ Authorizationå¤´\n      const data = response.data;\n      console.log('éªŒè¯å“åº”:', data);\n      \n      if (data.success && data.data && data.data.user) {\n        console.log('TokenéªŒè¯æˆåŠŸï¼Œç”¨æˆ·ä¿¡æ¯:', data.data.user);\n        \n        // æ›´æ–°éªŒè¯æ—¶é—´å’Œç”¨æˆ·ä¿¡æ¯\n        localStorage.setItem(AUTH_LAST_VERIFIED_KEY, Date.now().toString());\n        localStorage.setItem(USER_INFO_KEY, JSON.stringify(data.data.user));\n        \n        return { success: true, user: data.data.user };\n      } else {\n        console.log('TokenéªŒè¯å¤±è´¥ï¼ŒæœåŠ¡å™¨è¿”å›:', data);\n        tokenManager.removeToken();\n        localStorage.removeItem(USER_INFO_KEY);\n        localStorage.removeItem(AUTH_LAST_VERIFIED_KEY);\n        return { success: false };\n      }\n    } catch (error: any) {\n      console.error('ä»¤ç‰ŒéªŒè¯å¤±è´¥:', error);\n      console.error('é”™è¯¯çŠ¶æ€ç :', error.response?.status);\n      console.error('é”™è¯¯è¯¦æƒ…:', error.response?.data);\n      \n      // æ£€æŸ¥æ˜¯å¦ä¸ºç½‘ç»œé”™è¯¯\n      const isNetworkError = !error.response;\n      if (isNetworkError) {\n        console.warn('éªŒè¯token: ç½‘ç»œé”™è¯¯ï¼Œæ£€æŸ¥æœ¬åœ°ç”¨æˆ·ä¿¡æ¯');\n        \n        // ç½‘ç»œé”™è¯¯æ—¶ï¼Œå¦‚æœæœ‰æœ¬åœ°ç”¨æˆ·ä¿¡æ¯ï¼Œå°è¯•ä½¿ç”¨æœ¬åœ°ä¿¡æ¯\n        const storedUserInfo = localStorage.getItem(USER_INFO_KEY);\n        if (storedUserInfo && tokenManager.isAuthenticated()) {\n          try {\n            const user = JSON.parse(storedUserInfo);\n            console.log('ç½‘ç»œé”™è¯¯ï¼Œä½¿ç”¨æœ¬åœ°ç”¨æˆ·ä¿¡æ¯:', user);\n            return {\n              success: true,\n              user: user,\n              networkError: true\n            };\n          } catch (e) {\n            console.error('è§£ææœ¬åœ°ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', e);\n          }\n        }\n        \n        return {\n          success: false,\n          networkError: true\n        };\n      }\n      \n      // æ¸…é™¤æ— æ•ˆçš„tokenï¼ˆé™¤éæ˜¯ç½‘ç»œé”™è¯¯ï¼‰\n      if (!isNetworkError) {\n        tokenManager.removeToken();\n        localStorage.removeItem(USER_INFO_KEY);\n        localStorage.removeItem(AUTH_LAST_VERIFIED_KEY);\n      }\n      \n      return { success: false };\n    }\n  }\n\n  /**\n   * è·å–ç”¨æˆ·èµ„æ–™\n   */\n  async getProfile(): Promise<{ success: boolean; user?: User; networkError?: boolean }> {\n    try {\n      const token = tokenManager.getToken();\n      if (!token) {\n        return { success: false };\n      }\n\n      // ä½¿ç”¨é‡è¯•æœºåˆ¶å‘é€è¯·æ±‚\n      const response = await retryAuthRequest({\n        method: 'get',\n        url: `${AUTH_API_URL}/profile`,\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      // è¯·æ±‚æ‹¦æˆªå™¨ä¼šè‡ªåŠ¨æ·»åŠ Authorizationå¤´\n      const data = response.data;\n      \n      if (data.success && data.data && data.data.user) {\n        // æ›´æ–°ç”¨æˆ·ä¿¡æ¯å’ŒéªŒè¯æ—¶é—´\n        localStorage.setItem(USER_INFO_KEY, JSON.stringify(data.data.user));\n        localStorage.setItem(AUTH_LAST_VERIFIED_KEY, Date.now().toString());\n        \n        return { success: true, user: data.data.user };\n      } else {\n        return { success: false };\n      }\n    } catch (error: any) {\n      console.error('è·å–ç”¨æˆ·èµ„æ–™å¤±è´¥:', error);\n      \n      // æ£€æŸ¥æ˜¯å¦ä¸ºç½‘ç»œé”™è¯¯\n      const isNetworkError = !error.response;\n      if (isNetworkError) {\n        return {\n          success: false,\n          networkError: true\n        };\n      }\n      \n      // å¦‚æœæ˜¯401é”™è¯¯ï¼Œæ¸…é™¤è®¤è¯çŠ¶æ€\n      if (error.response?.status === 401) {\n        tokenManager.removeToken();\n        localStorage.removeItem(USER_INFO_KEY);\n        localStorage.removeItem(AUTH_LAST_VERIFIED_KEY);\n      }\n      \n      return { success: false };\n    }\n  }\n\n  /**\n   * ç”¨æˆ·ç™»å‡º\n   */\n  async logout(): Promise<{ success: boolean; message?: string }> {\n    try {\n      const token = tokenManager.getToken();\n      if (token) {\n        try {\n          // å¯é€‰ï¼šè°ƒç”¨åç«¯ç™»å‡ºæ¥å£\n          await authApi.post('/logout');\n          // æ³¨æ„ï¼šç”±äºæ·»åŠ äº†è¯·æ±‚æ‹¦æˆªå™¨ï¼Œè¿™é‡Œä¸éœ€è¦æ‰‹åŠ¨æ·»åŠ Authorizationå¤´\n          console.log('æˆåŠŸè°ƒç”¨ç™»å‡ºAPI');\n        } catch (error) {\n          console.warn('ç™»å‡ºAPIè°ƒç”¨å¤±è´¥ï¼Œä½†ä¼šç»§ç»­æ¸…é™¤æœ¬åœ°çŠ¶æ€:', error);\n        }\n      }\n      \n      // æ— è®ºå¦‚ä½•éƒ½è¦æ¸…é™¤æœ¬åœ°ä»¤ç‰Œå’Œç”¨æˆ·ä¿¡æ¯\n      tokenManager.removeToken();\n      localStorage.removeItem(USER_INFO_KEY);\n      localStorage.removeItem(AUTH_LAST_VERIFIED_KEY);\n      \n      return { success: true, message: 'å·²å®‰å…¨é€€å‡ºç™»å½•' };\n    } catch (error: any) {\n      console.error('ç™»å‡ºè¿‡ç¨‹å‡ºé”™:', error);\n      \n      // å³ä½¿å‡ºé”™ï¼Œä¹Ÿè¦å°è¯•æ¸…é™¤æœ¬åœ°çŠ¶æ€\n      try {\n        tokenManager.removeToken();\n        localStorage.removeItem(USER_INFO_KEY);\n        localStorage.removeItem(AUTH_LAST_VERIFIED_KEY);\n      } catch (e) {\n        console.error('æ¸…é™¤æœ¬åœ°çŠ¶æ€å¤±è´¥:', e);\n      }\n      \n      return {\n        success: false,\n        message: 'ç™»å‡ºè¿‡ç¨‹å‡ºé”™ï¼Œä½†å·²æ¸…é™¤æœ¬åœ°ç™»å½•çŠ¶æ€'\n      };\n    }\n  }\n\n  /**\n   * æ£€æŸ¥æ˜¯å¦å·²è®¤è¯\n   */\n  isAuthenticated(): boolean {\n    return tokenManager.isAuthenticated();\n  }\n  \n  /**\n   * æ£€æŸ¥è®¤è¯çŠ¶æ€ï¼ˆæœ¬åœ°æ£€æŸ¥ï¼Œä¸å‘é€ç½‘ç»œè¯·æ±‚ï¼‰\n   */\n  checkAuthStatus(): { isAuthenticated: boolean; user: User | null } {\n    const isAuthenticated = this.isAuthenticated();\n    let user: User | null = null;\n    \n    // å¦‚æœæœ‰tokenï¼Œå°è¯•ä»localStorageè·å–ç”¨æˆ·ä¿¡æ¯\n    if (isAuthenticated) {\n      try {\n        const userInfo = localStorage.getItem(USER_INFO_KEY);\n        if (userInfo) {\n          user = JSON.parse(userInfo);\n        }\n      } catch (e) {\n        console.error('è§£æç”¨æˆ·ä¿¡æ¯å¤±è´¥:', e);\n      }\n    }\n    \n    return { isAuthenticated, user };\n  }\n}\n\nexport const authService = new AuthService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}