{"ast":null,"code":"var _jsxFileName = \"E:\\\\AICode\\\\StockInsight\\\\frontend\\\\src\\\\components\\\\SearchBox.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback, useMemo, useEffect } from 'react';\nimport { AutoComplete, Button, message, Divider, Tag, Tooltip } from 'antd';\nimport { SearchOutlined, HistoryOutlined, FireOutlined, DeleteOutlined } from '@ant-design/icons';\nimport { apiService } from '../services/api';\nimport { debounce, handleApiError } from '../utils/helpers';\nimport { stockCache, CACHE_KEYS } from '../utils/stockCache';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// çƒ­é—¨è‚¡ç¥¨åˆ—è¡¨\nconst HOT_STOCKS = [{\n  code: '600519',\n  name: 'è´µå·èŒ…å°'\n}, {\n  code: '300750',\n  name: 'å®å¾·æ—¶ä»£'\n}, {\n  code: '002594',\n  name: 'æ¯”äºšè¿ª'\n}, {\n  code: '600036',\n  name: 'æ‹›å•†é“¶è¡Œ'\n}, {\n  code: '601318',\n  name: 'ä¸­å›½å¹³å®‰'\n}, {\n  code: '600276',\n  name: 'æ’ç‘åŒ»è¯'\n}, {\n  code: '601888',\n  name: 'ä¸­å›½ä¸­å…'\n}, {\n  code: '000858',\n  name: 'äº”ç²®æ¶²'\n}];\n\n// æœç´¢å†å²æœ¬åœ°å­˜å‚¨é”®å\nconst SEARCH_HISTORY_KEY = 'stock_search_history';\nconst SearchBox = ({\n  onSelectStock,\n  onAddStock,\n  placeholder = \"æœç´¢è‚¡ç¥¨ä»£ç æˆ–åç§°...\"\n}) => {\n  _s();\n  const [options, setOptions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [searchValue, setSearchValue] = useState('');\n  const [searchHistory, setSearchHistory] = useState([]);\n  const [showHistory, setShowHistory] = useState(false);\n\n  // åŠ è½½æœç´¢å†å²\n  useEffect(() => {\n    try {\n      const historyJson = localStorage.getItem(SEARCH_HISTORY_KEY);\n      if (historyJson) {\n        const history = JSON.parse(historyJson);\n        setSearchHistory(history);\n      }\n    } catch (error) {\n      console.error('åŠ è½½æœç´¢å†å²å¤±è´¥:', error);\n    }\n  }, []);\n\n  // ä¿å­˜æœç´¢å†å²\n  const saveToHistory = stock => {\n    try {\n      // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨\n      const exists = searchHistory.some(item => item.code === stock.code);\n      if (!exists) {\n        // æ·»åŠ åˆ°å†å²è®°å½•å‰ç«¯ï¼Œé™åˆ¶ä¸º10æ¡\n        const newHistory = [stock, ...searchHistory].slice(0, 10);\n        setSearchHistory(newHistory);\n        // ä¿å­˜åˆ°localStorage\n        localStorage.setItem(SEARCH_HISTORY_KEY, JSON.stringify(newHistory));\n      } else {\n        // å¦‚æœå·²å­˜åœ¨ï¼Œå°†å…¶ç§»åˆ°æœ€å‰é¢\n        const newHistory = [stock, ...searchHistory.filter(item => item.code !== stock.code)].slice(0, 10);\n        setSearchHistory(newHistory);\n        localStorage.setItem(SEARCH_HISTORY_KEY, JSON.stringify(newHistory));\n      }\n    } catch (error) {\n      console.error('ä¿å­˜æœç´¢å†å²å¤±è´¥:', error);\n    }\n  };\n\n  // æ¸…ç©ºæœç´¢å†å²\n  const clearSearchHistory = e => {\n    e.stopPropagation();\n    try {\n      localStorage.removeItem(SEARCH_HISTORY_KEY);\n      setSearchHistory([]);\n      message.success('æœç´¢å†å²å·²æ¸…ç©º');\n    } catch (error) {\n      console.error('æ¸…ç©ºæœç´¢å†å²å¤±è´¥:', error);\n      message.error('æ¸…ç©ºæœç´¢å†å²å¤±è´¥');\n    }\n  };\n\n  // æœç´¢è‚¡ç¥¨çš„æ ¸å¿ƒé€»è¾‘\n  const performSearch = useCallback(async keyword => {\n    if (!keyword.trim()) {\n      console.log('ğŸ” æœç´¢å–æ¶ˆï¼šæŸ¥è¯¢å­—ç¬¦ä¸²ä¸ºç©º');\n      setOptions([]);\n      return;\n    }\n\n    // å¦‚æœå…³é”®è¯é•¿åº¦å°äº2ï¼Œä¸æ‰§è¡Œæœç´¢\n    if (keyword.trim().length < 2) {\n      console.log('ğŸ” æœç´¢å–æ¶ˆï¼šå…³é”®è¯é•¿åº¦ä¸è¶³2ä¸ªå­—ç¬¦');\n      setOptions([]);\n      return;\n    }\n    console.log('ğŸ” å¼€å§‹æœç´¢ï¼š', {\n      keyword: keyword.trim(),\n      timestamp: new Date().toISOString(),\n      searchValue: searchValue,\n      currentOptions: options.length\n    });\n    setLoading(true);\n    try {\n      console.log('ğŸ“¡ è°ƒç”¨APIæœç´¢è‚¡ç¥¨:', keyword);\n      const response = await apiService.searchStocks(keyword, 10);\n      console.log('ğŸ“Š APIå“åº”è¯¦æƒ…:', {\n        success: response.success,\n        hasData: !!response.data,\n        dataType: typeof response.data,\n        isArray: Array.isArray(response.data),\n        dataLength: Array.isArray(response.data) ? response.data.length : 'N/A',\n        firstItem: Array.isArray(response.data) && response.data.length > 0 ? response.data[0] : null,\n        rawResponse: response\n      });\n      if (response.success && response.data && Array.isArray(response.data)) {\n        const searchOptions = response.data.map((stock, index) => {\n          console.log(`ğŸ“‹ å¤„ç†æœç´¢ç»“æœ ${index + 1}:`, {\n            stock,\n            hasCode: 'code' in stock,\n            hasName: 'name' in stock,\n            hasPrice: 'current_price' in stock,\n            hasChangePercent: 'change_percent' in stock\n          });\n          return {\n            value: `${stock.code} ${stock.name}`,\n            label: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  flex: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontWeight: 500,\n                    color: '#ffffff'\n                  },\n                  children: stock.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '0.8rem',\n                    color: '#8b8d97'\n                  },\n                  children: [stock.code, \" | \\xA5\", typeof stock.current_price === 'number' ? stock.current_price.toFixed(2) : '0.00']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '8px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    textAlign: 'right'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      color: (stock.change_percent || 0) > 0 ? '#22c55e' : (stock.change_percent || 0) < 0 ? '#ef4444' : '#8b8d97',\n                      fontSize: '0.8rem'\n                    },\n                    children: [(stock.change_percent || 0) > 0 ? '+' : '', (stock.change_percent || 0).toFixed(2), \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 156,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 19\n                }, this), onAddStock && /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"primary\",\n                  size: \"small\",\n                  onClick: e => {\n                    e.stopPropagation();\n                    onAddStock(stock);\n                    message.success(`å·²æ·»åŠ  ${stock.name} åˆ°å…³æ³¨åˆ—è¡¨`);\n                  },\n                  style: {\n                    background: '#667eea',\n                    borderColor: '#667eea',\n                    fontSize: '0.75rem',\n                    height: '24px',\n                    padding: '0 8px'\n                  },\n                  children: \"\\u6DFB\\u52A0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 15\n            }, this),\n            stock\n          };\n        });\n        console.log('âœ… æœç´¢ç»“æœå¤„ç†å®Œæˆï¼š', {\n          originalCount: response.data.length,\n          formattedCount: searchOptions.length,\n          formattedOptions: searchOptions.map(opt => ({\n            value: opt.value,\n            hasLabel: !!opt.label,\n            stock: opt.stock\n          }))\n        });\n        setOptions(searchOptions);\n        console.log('æœç´¢ç»“æœå¤„ç†å®Œæˆï¼Œå…±', searchOptions.length, 'æ¡');\n      } else {\n        console.warn('âš ï¸ æœç´¢ç»“æœæ ¼å¼å¼‚å¸¸ï¼š', {\n          success: response.success,\n          hasData: !!response.data,\n          dataType: typeof response.data,\n          isArray: Array.isArray(response.data),\n          response: response\n        });\n        console.log('æœç´¢æ— ç»“æœæˆ–å“åº”æ ¼å¼é”™è¯¯');\n        setOptions([]);\n      }\n    } catch (error) {\n      console.error('ğŸ’¥ æœç´¢è¯·æ±‚å¼‚å¸¸ï¼š', {\n        errorType: error instanceof Error ? error.constructor.name : typeof error,\n        errorMessage: error instanceof Error ? error.message : String(error),\n        errorStack: error instanceof Error ? error.stack : undefined,\n        keyword: keyword.trim(),\n        timestamp: new Date().toISOString()\n      });\n      const errorMessage = handleApiError(error);\n      // åªåœ¨éç½‘ç»œé”™è¯¯æ—¶æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ï¼Œé¿å…é¢‘ç¹å¼¹çª—\n      if (!errorMessage.includes('ç½‘ç»œ') && !errorMessage.includes('è¿æ¥')) {\n        message.error(errorMessage);\n      }\n      setOptions([]);\n    } finally {\n      setLoading(false);\n      console.log('ğŸ æœç´¢å®Œæˆï¼š', {\n        keyword: keyword.trim(),\n        timestamp: new Date().toISOString(),\n        finalOptionsCount: options.length\n      });\n    }\n  }, [onAddStock, searchValue, options.length]);\n\n  // é˜²æŠ–æœç´¢å‡½æ•°\n  const searchStocks = useMemo(() => debounce(keyword => {\n    performSearch(keyword);\n  }, 300), [performSearch]);\n\n  // å¤„ç†è¾“å…¥å˜åŒ–æ—¶çš„ä¸‹æ‹‰é€‰é¡¹æ˜¾ç¤ºï¼ˆä»…ç”¨äºå»ºè®®ï¼Œä¸æ‰§è¡Œæœç´¢ï¼‰\n  const handleInputChange = value => {\n    setSearchValue(value);\n    if (value.trim().length >= 2) {\n      // åªæœ‰è¾“å…¥2ä¸ªå­—ç¬¦ä»¥ä¸Šæ‰æ˜¾ç¤ºå»ºè®®ï¼Œä½†ä¸æ‰§è¡Œå®é™…æœç´¢\n      searchStocks(value);\n    } else if (value.trim() === '') {\n      // å½“è¾“å…¥æ¡†ä¸ºç©ºæ—¶ï¼Œæ˜¾ç¤ºå†å²è®°å½•å’Œçƒ­é—¨è‚¡ç¥¨\n      setShowHistory(true);\n      setOptions([]);\n    } else {\n      setOptions([]);\n      setShowHistory(false);\n    }\n  };\n\n  // å¤„ç†è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹\n  const handleFocus = () => {\n    if (!searchValue.trim()) {\n      setShowHistory(true);\n    }\n  };\n\n  // å¤„ç†è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹\n  const handleBlur = () => {\n    // å»¶è¿Ÿå…³é—­ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥ç‚¹å‡»å†å²è®°å½•\n    setTimeout(() => {\n      setShowHistory(false);\n    }, 200);\n  };\n\n  // å¤„ç†é€‰æ‹©\n  const handleSelect = (value, option) => {\n    onSelectStock(option.stock);\n    saveToHistory(option.stock);\n    setSearchValue('');\n    setOptions([]);\n    setShowHistory(false);\n  };\n\n  // ä»å†å²è®°å½•ä¸­é€‰æ‹©\n  const selectFromHistory = stock => {\n    onSelectStock(stock);\n    saveToHistory(stock);\n    setSearchValue('');\n    setShowHistory(false);\n  };\n\n  // ä»çƒ­é—¨è‚¡ç¥¨ä¸­é€‰æ‹©\n  const selectHotStock = async hotStock => {\n    try {\n      setLoading(true);\n      // å…ˆæ£€æŸ¥ç¼“å­˜\n      const cacheKey = CACHE_KEYS.SEARCH_RESULTS(hotStock.code);\n      const cached = stockCache.get(cacheKey);\n      if (cached && cached.success && cached.data && cached.data.length > 0) {\n        const stock = cached.data[0];\n        onSelectStock(stock);\n        saveToHistory(stock);\n        message.success(`å·²æ·»åŠ  ${hotStock.name} åˆ°å…³æ³¨åˆ—è¡¨`);\n      } else {\n        // å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰ï¼Œåˆ™ä»APIè·å–\n        const response = await apiService.searchStocks(hotStock.code, 1);\n        if (response.success && response.data && response.data.length > 0) {\n          const stock = response.data[0];\n          onSelectStock(stock);\n          saveToHistory(stock);\n          message.success(`å·²æ·»åŠ  ${hotStock.name} åˆ°å…³æ³¨åˆ—è¡¨`);\n        } else {\n          message.error(`æœªæ‰¾åˆ°è‚¡ç¥¨: ${hotStock.name}`);\n        }\n      }\n    } catch (error) {\n      console.error('æ·»åŠ çƒ­é—¨è‚¡ç¥¨å¤±è´¥:', error);\n      message.error(handleApiError(error));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // å¤„ç†æœç´¢æŒ‰é’®ç‚¹å‡»\n  const handleSearchClick = async () => {\n    const trimmedValue = searchValue.trim();\n    if (!trimmedValue) {\n      message.warning('è¯·è¾“å…¥æœç´¢å…³é”®è¯');\n      return;\n    }\n    if (trimmedValue.length < 2) {\n      message.warning('è¯·è¾“å…¥è‡³å°‘2ä¸ªå­—ç¬¦');\n      return;\n    }\n    setLoading(true);\n    try {\n      console.log('æ‰‹åŠ¨æœç´¢:', trimmedValue);\n      const response = await apiService.searchStocks(trimmedValue, 10);\n      console.log('æ‰‹åŠ¨æœç´¢å“åº”:', response);\n      if (response.success && response.data && Array.isArray(response.data) && response.data.length > 0) {\n        // å¦‚æœæœç´¢æˆåŠŸä¸”æœ‰ç»“æœï¼Œä¿å­˜ç¬¬ä¸€ä¸ªç»“æœåˆ°å†å²è®°å½•\n        saveToHistory(response.data[0]);\n        const searchOptions = response.data.map(stock => ({\n          value: `${stock.code} ${stock.name}`,\n          label: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 500,\n                  color: '#ffffff'\n                },\n                children: stock.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '0.8rem',\n                  color: '#8b8d97'\n                },\n                children: [stock.code, \" | \\xA5\", typeof stock.current_price === 'number' ? stock.current_price.toFixed(2) : '0.00']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '8px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  textAlign: 'right'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    color: (stock.change_percent || 0) > 0 ? '#22c55e' : (stock.change_percent || 0) < 0 ? '#ef4444' : '#8b8d97',\n                    fontSize: '0.8rem'\n                  },\n                  children: [(stock.change_percent || 0) > 0 ? '+' : '', (stock.change_percent || 0).toFixed(2), \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 17\n              }, this), onAddStock && /*#__PURE__*/_jsxDEV(Button, {\n                type: \"primary\",\n                size: \"small\",\n                onClick: e => {\n                  e.stopPropagation();\n                  onAddStock(stock);\n                  message.success(`å·²æ·»åŠ  ${stock.name} åˆ°å…³æ³¨åˆ—è¡¨`);\n                },\n                style: {\n                  background: '#667eea',\n                  borderColor: '#667eea',\n                  fontSize: '0.75rem',\n                  height: '24px',\n                  padding: '0 8px'\n                },\n                children: \"\\u6DFB\\u52A0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this),\n          stock\n        }));\n        setOptions(searchOptions);\n        message.success(`æ‰¾åˆ° ${response.data.length} ä¸ªç›¸å…³è‚¡ç¥¨`);\n      } else {\n        setOptions([]);\n        message.info(`æœªæ‰¾åˆ°ä¸\"${trimmedValue}\"ç›¸å…³çš„è‚¡ç¥¨ï¼Œè¯·å°è¯•å…¶ä»–å…³é”®è¯`);\n      }\n    } catch (error) {\n      console.error('æœç´¢å¤±è´¥:', error);\n      const errorMessage = handleApiError(error);\n      message.error(`æœç´¢å¤±è´¥: ${errorMessage}`);\n      setOptions([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // å¤„ç†é”®ç›˜äº‹ä»¶\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') {\n      handleSearchClick();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-box-container\",\n    style: {\n      position: 'relative',\n      zIndex: 1050\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-input-wrapper\",\n      style: {\n        position: 'relative',\n        display: 'flex',\n        alignItems: 'center',\n        width: '100%',\n        maxWidth: '600px',\n        height: '48px',\n        margin: '0 auto',\n        marginTop: '0px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(SearchOutlined, {\n        style: {\n          position: 'absolute',\n          left: '14px',\n          color: '#8b8d97',\n          fontSize: '16px',\n          zIndex: 10\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AutoComplete, {\n        value: searchValue,\n        options: options,\n        onSearch: handleInputChange,\n        onSelect: handleSelect,\n        onInputKeyDown: handleKeyPress,\n        onFocus: handleFocus,\n        onBlur: handleBlur,\n        placeholder: placeholder,\n        style: {\n          width: '100%',\n          height: '48px'\n        },\n        dropdownStyle: {\n          background: '#2a2d3a',\n          border: '1px solid #3a3d4a',\n          borderRadius: '8px',\n          zIndex: 1100,\n          boxShadow: '0 6px 16px rgba(0, 0, 0, 0.25)',\n          maxHeight: '300px',\n          overflowY: 'auto'\n        },\n        notFoundContent: loading ? 'æœç´¢ä¸­...' : searchValue.trim().length < 2 ? 'è¯·è¾“å…¥è‡³å°‘2ä¸ªå­—ç¬¦' : 'æš‚æ— ç»“æœ',\n        filterOption: false,\n        allowClear: false,\n        showSearch: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: handleSearchClick,\n        loading: loading,\n        style: {\n          position: 'absolute',\n          right: '6px',\n          background: '#667eea',\n          borderColor: '#667eea',\n          borderRadius: '20px',\n          padding: '8px 16px',\n          fontSize: '14px',\n          fontWeight: 500,\n          zIndex: 10,\n          height: '36px',\n          lineHeight: '20px'\n        },\n        children: \"\\u641C\\u7D22\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      dangerouslySetInnerHTML: {\n        __html: `\n          /* æœç´¢æ¡†å®¹å™¨æ ·å¼ - é«˜ç‰¹å¼‚æ€§ç¡®ä¿ä¸è¢«å…¨å±€æ ·å¼è¦†ç›– */\n          .search-box-container {\n            position: relative;\n            display: flex;\n            align-items: center;\n            width: 100%;\n            max-width: 600px;\n            margin: 0 auto;\n          }\n\n          /* æœç´¢æ¡†ä¸»ä½“æ ·å¼ - ä½¿ç”¨é«˜ç‰¹å¼‚æ€§é€‰æ‹©å™¨ */\n          .search-box-container .ant-select.ant-select-auto-complete {\n            width: 100% !important;\n            height: 48px !important;\n          }\n\n          .search-box-container .ant-select.ant-select-auto-complete .ant-select-selector {\n            background: #2a2d3a !important;\n            border: 1px solid #3a3d4a !important;\n            border-radius: 24px !important;\n            padding: 0 60px 0 40px !important;\n            height: 48px !important;\n            color: #ffffff !important;\n            display: flex !important;\n            align-items: center !important;\n            min-height: 48px !important;\n            box-sizing: border-box !important;\n            line-height: 24px !important;\n            transition: all 0.3s ease !important;\n          }\n\n          .search-box-container .ant-select.ant-select-auto-complete .ant-select-selector:hover {\n            border-color: #667eea !important;\n          }\n\n          .search-box-container .ant-select.ant-select-auto-complete .ant-select-selection-search {\n            left: 40px !important;\n            right: 60px !important;\n            height: 100% !important;\n            display: flex !important;\n            align-items: center !important;\n          }\n\n          .search-box-container .ant-select.ant-select-auto-complete .ant-select-selection-search-input {\n            background: transparent !important;\n            border: none !important;\n            color: #ffffff !important;\n            height: 100% !important;\n            line-height: 24px !important;\n            font-size: 14px !important;\n            padding: 0 !important;\n            margin: 0 !important;\n            outline: none !important;\n          }\n\n          .search-box-container .ant-select.ant-select-auto-complete .ant-select-selection-placeholder {\n            color: #8b8d97 !important;\n            left: 40px !important;\n            right: 60px !important;\n            line-height: 24px !important;\n            display: flex !important;\n            align-items: center !important;\n            height: 100% !important;\n            font-size: 14px !important;\n          }\n\n          .search-box-container .ant-select.ant-select-auto-complete.ant-select-focused .ant-select-selector {\n            border-color: #667eea !important;\n            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2) !important;\n          }\n\n          /* ä¸‹æ‹‰èœå•æ ·å¼ */\n          .search-box-container .ant-select-dropdown {\n            background: #2a2d3a !important;\n            border: 1px solid #3a3d4a !important;\n            border-radius: 8px !important;\n            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25) !important;\n            z-index: 1100 !important;\n          }\n\n          .search-box-container .ant-select-item {\n            color: #ffffff !important;\n            background: transparent !important;\n            padding: 8px 12px !important;\n            transition: all 0.2s ease !important;\n          }\n\n          .search-box-container .ant-select-item:hover {\n            background: #3a3d4a !important;\n          }\n\n          .search-box-container .ant-select-item-option-selected {\n            background: #667eea !important;\n          }\n\n          .search-box-container .ant-empty {\n            color: #8b8d97 !important;\n          }\n\n          .search-box-container .ant-empty-description {\n            color: #8b8d97 !important;\n          }\n        `\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 493,\n      columnNumber: 7\n    }, this), showHistory && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        top: '52px',\n        // è°ƒæ•´é¡¶éƒ¨è·ç¦»ï¼Œç¡®ä¿ä¸ä¸æœç´¢æ¡†é‡å \n        left: '0',\n        right: '0',\n        width: '100%',\n        maxWidth: '600px',\n        margin: '0 auto',\n        background: '#2a2d3a',\n        border: '1px solid #3a3d4a',\n        borderRadius: '8px',\n        padding: '12px',\n        zIndex: 1200,\n        // æé«˜z-indexç¡®ä¿åœ¨å…¶ä»–å…ƒç´ ä¹‹ä¸Š\n        boxShadow: '0 6px 16px rgba(0, 0, 0, 0.25)',\n        maxHeight: '400px',\n        // é™åˆ¶æœ€å¤§é«˜åº¦\n        overflowY: 'auto' // å†…å®¹è¿‡å¤šæ—¶å¯æ»šåŠ¨\n      },\n      children: [searchHistory.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            marginBottom: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '6px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(HistoryOutlined, {\n              style: {\n                color: '#8b8d97'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 624,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: '#8b8d97',\n                fontSize: '12px'\n              },\n              children: \"\\u641C\\u7D22\\u5386\\u53F2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 625,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 623,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"text\",\n            size: \"small\",\n            icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 630,\n              columnNumber: 25\n            }, this),\n            onClick: clearSearchHistory,\n            style: {\n              color: '#8b8d97',\n              fontSize: '12px'\n            },\n            children: \"\\u6E05\\u7A7A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 627,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 622,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexWrap: 'wrap',\n            gap: '8px',\n            marginBottom: '12px'\n          },\n          children: searchHistory.map(stock => /*#__PURE__*/_jsxDEV(Tag, {\n            style: {\n              background: '#3a3d4a',\n              borderColor: '#4a4d5a',\n              color: '#ffffff',\n              cursor: 'pointer',\n              padding: '4px 8px',\n              borderRadius: '4px',\n              transition: 'all 0.2s ease'\n            },\n            onClick: () => selectFromHistory(stock),\n            onMouseEnter: e => {\n              e.currentTarget.style.background = '#4a4d5a';\n            },\n            onMouseLeave: e => {\n              e.currentTarget.style.background = '#3a3d4a';\n            },\n            children: [stock.name, \" (\", stock.code, \")\"]\n          }, stock.code, true, {\n            fileName: _jsxFileName,\n            lineNumber: 639,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 637,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {\n          style: {\n            margin: '8px 0',\n            borderColor: '#3a3d4a'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 621,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '6px',\n            marginBottom: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(FireOutlined, {\n            style: {\n              color: '#f59e0b'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 669,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: '#8b8d97',\n              fontSize: '12px'\n            },\n            children: \"\\u70ED\\u95E8\\u80A1\\u7968\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 670,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 668,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexWrap: 'wrap',\n            gap: '8px'\n          },\n          children: HOT_STOCKS.map(stock => /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: `æ·»åŠ ${stock.name}åˆ°å…³æ³¨åˆ—è¡¨`,\n            children: /*#__PURE__*/_jsxDEV(Tag, {\n              style: {\n                background: '#3a3d4a',\n                borderColor: '#4a4d5a',\n                color: '#ffffff',\n                cursor: 'pointer',\n                padding: '4px 8px',\n                borderRadius: '4px',\n                transition: 'all 0.2s ease'\n              },\n              onClick: () => selectHotStock(stock),\n              onMouseEnter: e => {\n                e.currentTarget.style.background = '#4a4d5a';\n              },\n              onMouseLeave: e => {\n                e.currentTarget.style.background = '#3a3d4a';\n              },\n              children: [stock.name, \" (\", stock.code, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 675,\n              columnNumber: 19\n            }, this)\n          }, stock.code, false, {\n            fileName: _jsxFileName,\n            lineNumber: 674,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 672,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 667,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 602,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 420,\n    columnNumber: 5\n  }, this);\n};\n_s(SearchBox, \"3FyAjPo7oRxVUNPG0CONtCUWH0Y=\");\n_c = SearchBox;\nexport default SearchBox;\nvar _c;\n$RefreshReg$(_c, \"SearchBox\");","map":{"version":3,"names":["React","useState","useCallback","useMemo","useEffect","AutoComplete","Button","message","Divider","Tag","Tooltip","SearchOutlined","HistoryOutlined","FireOutlined","DeleteOutlined","apiService","debounce","handleApiError","stockCache","CACHE_KEYS","jsxDEV","_jsxDEV","HOT_STOCKS","code","name","SEARCH_HISTORY_KEY","SearchBox","onSelectStock","onAddStock","placeholder","_s","options","setOptions","loading","setLoading","searchValue","setSearchValue","searchHistory","setSearchHistory","showHistory","setShowHistory","historyJson","localStorage","getItem","history","JSON","parse","error","console","saveToHistory","stock","exists","some","item","newHistory","slice","setItem","stringify","filter","clearSearchHistory","e","stopPropagation","removeItem","success","performSearch","keyword","trim","log","length","timestamp","Date","toISOString","currentOptions","response","searchStocks","hasData","data","dataType","isArray","Array","dataLength","firstItem","rawResponse","searchOptions","map","index","hasCode","hasName","hasPrice","hasChangePercent","value","label","style","display","justifyContent","alignItems","children","flex","fontWeight","color","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","current_price","toFixed","gap","textAlign","change_percent","type","size","onClick","background","borderColor","height","padding","originalCount","formattedCount","formattedOptions","opt","hasLabel","warn","errorType","Error","constructor","errorMessage","String","errorStack","stack","undefined","includes","finalOptionsCount","handleInputChange","handleFocus","handleBlur","setTimeout","handleSelect","option","selectFromHistory","selectHotStock","hotStock","cacheKey","SEARCH_RESULTS","cached","get","handleSearchClick","trimmedValue","warning","info","handleKeyPress","key","className","position","zIndex","width","maxWidth","margin","marginTop","left","onSearch","onSelect","onInputKeyDown","onFocus","onBlur","dropdownStyle","border","borderRadius","boxShadow","maxHeight","overflowY","notFoundContent","filterOption","allowClear","showSearch","right","lineHeight","dangerouslySetInnerHTML","__html","top","marginBottom","icon","flexWrap","cursor","transition","onMouseEnter","currentTarget","onMouseLeave","title","_c","$RefreshReg$"],"sources":["E:/AICode/StockInsight/frontend/src/components/SearchBox.tsx"],"sourcesContent":["import React, { useState, useCallback, useMemo, useEffect } from 'react';\r\nimport { AutoComplete, Button, message, Divider, Tag, Tooltip } from 'antd';\r\nimport { SearchOutlined, HistoryOutlined, FireOutlined, DeleteOutlined } from '@ant-design/icons';\r\nimport { apiService, SearchResult } from '../services/api';\r\nimport { debounce, handleApiError } from '../utils/helpers';\r\nimport { stockCache, CACHE_KEYS } from '../utils/stockCache';\r\n\r\ninterface SearchBoxProps {\r\n  onSelectStock: (stock: SearchResult) => void;\r\n  onAddStock?: (stock: SearchResult) => void;\r\n  placeholder?: string;\r\n}\r\n\r\n// çƒ­é—¨è‚¡ç¥¨åˆ—è¡¨\r\nconst HOT_STOCKS = [\r\n  { code: '600519', name: 'è´µå·èŒ…å°' },\r\n  { code: '300750', name: 'å®å¾·æ—¶ä»£' },\r\n  { code: '002594', name: 'æ¯”äºšè¿ª' },\r\n  { code: '600036', name: 'æ‹›å•†é“¶è¡Œ' },\r\n  { code: '601318', name: 'ä¸­å›½å¹³å®‰' },\r\n  { code: '600276', name: 'æ’ç‘åŒ»è¯' },\r\n  { code: '601888', name: 'ä¸­å›½ä¸­å…' },\r\n  { code: '000858', name: 'äº”ç²®æ¶²' }\r\n];\r\n\r\n// æœç´¢å†å²æœ¬åœ°å­˜å‚¨é”®å\r\nconst SEARCH_HISTORY_KEY = 'stock_search_history';\r\n\r\ninterface OptionType {\r\n  value: string;\r\n  label: React.ReactNode;\r\n  stock: SearchResult;\r\n}\r\n\r\nconst SearchBox: React.FC<SearchBoxProps> = ({ \r\n  onSelectStock,\r\n  onAddStock,\r\n  placeholder = \"æœç´¢è‚¡ç¥¨ä»£ç æˆ–åç§°...\" \r\n}) => {\r\n  const [options, setOptions] = useState<OptionType[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const [searchHistory, setSearchHistory] = useState<SearchResult[]>([]);\r\n  const [showHistory, setShowHistory] = useState(false);\r\n\r\n  // åŠ è½½æœç´¢å†å²\r\n  useEffect(() => {\r\n    try {\r\n      const historyJson = localStorage.getItem(SEARCH_HISTORY_KEY);\r\n      if (historyJson) {\r\n        const history = JSON.parse(historyJson);\r\n        setSearchHistory(history);\r\n      }\r\n    } catch (error) {\r\n      console.error('åŠ è½½æœç´¢å†å²å¤±è´¥:', error);\r\n    }\r\n  }, []);\r\n\r\n  // ä¿å­˜æœç´¢å†å²\r\n  const saveToHistory = (stock: SearchResult) => {\r\n    try {\r\n      // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨\r\n      const exists = searchHistory.some(item => item.code === stock.code);\r\n      if (!exists) {\r\n        // æ·»åŠ åˆ°å†å²è®°å½•å‰ç«¯ï¼Œé™åˆ¶ä¸º10æ¡\r\n        const newHistory = [stock, ...searchHistory].slice(0, 10);\r\n        setSearchHistory(newHistory);\r\n        // ä¿å­˜åˆ°localStorage\r\n        localStorage.setItem(SEARCH_HISTORY_KEY, JSON.stringify(newHistory));\r\n      } else {\r\n        // å¦‚æœå·²å­˜åœ¨ï¼Œå°†å…¶ç§»åˆ°æœ€å‰é¢\r\n        const newHistory = [\r\n          stock,\r\n          ...searchHistory.filter(item => item.code !== stock.code)\r\n        ].slice(0, 10);\r\n        setSearchHistory(newHistory);\r\n        localStorage.setItem(SEARCH_HISTORY_KEY, JSON.stringify(newHistory));\r\n      }\r\n    } catch (error) {\r\n      console.error('ä¿å­˜æœç´¢å†å²å¤±è´¥:', error);\r\n    }\r\n  };\r\n\r\n  // æ¸…ç©ºæœç´¢å†å²\r\n  const clearSearchHistory = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    try {\r\n      localStorage.removeItem(SEARCH_HISTORY_KEY);\r\n      setSearchHistory([]);\r\n      message.success('æœç´¢å†å²å·²æ¸…ç©º');\r\n    } catch (error) {\r\n      console.error('æ¸…ç©ºæœç´¢å†å²å¤±è´¥:', error);\r\n      message.error('æ¸…ç©ºæœç´¢å†å²å¤±è´¥');\r\n    }\r\n  };\r\n\r\n  // æœç´¢è‚¡ç¥¨çš„æ ¸å¿ƒé€»è¾‘\r\n  const performSearch = useCallback(async (keyword: string) => {\r\n    if (!keyword.trim()) {\r\n      console.log('ğŸ” æœç´¢å–æ¶ˆï¼šæŸ¥è¯¢å­—ç¬¦ä¸²ä¸ºç©º');\r\n      setOptions([]);\r\n      return;\r\n    }\r\n\r\n    // å¦‚æœå…³é”®è¯é•¿åº¦å°äº2ï¼Œä¸æ‰§è¡Œæœç´¢\r\n    if (keyword.trim().length < 2) {\r\n      console.log('ğŸ” æœç´¢å–æ¶ˆï¼šå…³é”®è¯é•¿åº¦ä¸è¶³2ä¸ªå­—ç¬¦');\r\n      setOptions([]);\r\n      return;\r\n    }\r\n\r\n    console.log('ğŸ” å¼€å§‹æœç´¢ï¼š', {\r\n      keyword: keyword.trim(),\r\n      timestamp: new Date().toISOString(),\r\n      searchValue: searchValue,\r\n      currentOptions: options.length\r\n    });\r\n\r\n    setLoading(true);\r\n    try {\r\n      console.log('ğŸ“¡ è°ƒç”¨APIæœç´¢è‚¡ç¥¨:', keyword);\r\n      const response = await apiService.searchStocks(keyword, 10);\r\n      \r\n      console.log('ğŸ“Š APIå“åº”è¯¦æƒ…:', {\r\n        success: response.success,\r\n        hasData: !!response.data,\r\n        dataType: typeof response.data,\r\n        isArray: Array.isArray(response.data),\r\n        dataLength: Array.isArray(response.data) ? response.data.length : 'N/A',\r\n        firstItem: Array.isArray(response.data) && response.data.length > 0 ? response.data[0] : null,\r\n        rawResponse: response\r\n      });\r\n      \r\n      if (response.success && response.data && Array.isArray(response.data)) {\r\n        const searchOptions: OptionType[] = response.data.map((stock, index) => {\r\n          console.log(`ğŸ“‹ å¤„ç†æœç´¢ç»“æœ ${index + 1}:`, {\r\n            stock,\r\n            hasCode: 'code' in stock,\r\n            hasName: 'name' in stock,\r\n            hasPrice: 'current_price' in stock,\r\n            hasChangePercent: 'change_percent' in stock\r\n          });\r\n\r\n          return {\r\n            value: `${stock.code} ${stock.name}`,\r\n            label: (\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <div style={{ flex: 1 }}>\r\n                  <div style={{ fontWeight: 500, color: '#ffffff' }}>{stock.name}</div>\r\n                  <div style={{ fontSize: '0.8rem', color: '#8b8d97' }}>\r\n                    {stock.code} | Â¥{typeof stock.current_price === 'number' ? stock.current_price.toFixed(2) : '0.00'}\r\n                  </div>\r\n                </div>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                  <div style={{ textAlign: 'right' }}>\r\n                    <div style={{ \r\n                      color: (stock.change_percent || 0) > 0 ? '#22c55e' : \r\n                             (stock.change_percent || 0) < 0 ? '#ef4444' : '#8b8d97',\r\n                      fontSize: '0.8rem'\r\n                    }}>\r\n                      {(stock.change_percent || 0) > 0 ? '+' : ''}{(stock.change_percent || 0).toFixed(2)}%\r\n                    </div>\r\n                  </div>\r\n                  {onAddStock && (\r\n                    <Button\r\n                      type=\"primary\"\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        onAddStock(stock);\r\n                        message.success(`å·²æ·»åŠ  ${stock.name} åˆ°å…³æ³¨åˆ—è¡¨`);\r\n                      }}\r\n                      style={{\r\n                        background: '#667eea',\r\n                        borderColor: '#667eea',\r\n                        fontSize: '0.75rem',\r\n                        height: '24px',\r\n                        padding: '0 8px'\r\n                      }}\r\n                    >\r\n                      æ·»åŠ \r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ),\r\n            stock\r\n          };\r\n        });\r\n        \r\n        console.log('âœ… æœç´¢ç»“æœå¤„ç†å®Œæˆï¼š', {\r\n          originalCount: response.data.length,\r\n          formattedCount: searchOptions.length,\r\n          formattedOptions: searchOptions.map(opt => ({\r\n            value: opt.value,\r\n            hasLabel: !!opt.label,\r\n            stock: opt.stock\r\n          }))\r\n        });\r\n        \r\n        setOptions(searchOptions);\r\n        console.log('æœç´¢ç»“æœå¤„ç†å®Œæˆï¼Œå…±', searchOptions.length, 'æ¡');\r\n      } else {\r\n        console.warn('âš ï¸ æœç´¢ç»“æœæ ¼å¼å¼‚å¸¸ï¼š', {\r\n          success: response.success,\r\n          hasData: !!response.data,\r\n          dataType: typeof response.data,\r\n          isArray: Array.isArray(response.data),\r\n          response: response\r\n        });\r\n        console.log('æœç´¢æ— ç»“æœæˆ–å“åº”æ ¼å¼é”™è¯¯');\r\n        setOptions([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('ğŸ’¥ æœç´¢è¯·æ±‚å¼‚å¸¸ï¼š', {\r\n        errorType: error instanceof Error ? error.constructor.name : typeof error,\r\n        errorMessage: error instanceof Error ? error.message : String(error),\r\n        errorStack: error instanceof Error ? error.stack : undefined,\r\n        keyword: keyword.trim(),\r\n        timestamp: new Date().toISOString()\r\n      });\r\n      \r\n      const errorMessage = handleApiError(error);\r\n      // åªåœ¨éç½‘ç»œé”™è¯¯æ—¶æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ï¼Œé¿å…é¢‘ç¹å¼¹çª—\r\n      if (!errorMessage.includes('ç½‘ç»œ') && !errorMessage.includes('è¿æ¥')) {\r\n        message.error(errorMessage);\r\n      }\r\n      setOptions([]);\r\n    } finally {\r\n      setLoading(false);\r\n      console.log('ğŸ æœç´¢å®Œæˆï¼š', {\r\n        keyword: keyword.trim(),\r\n        timestamp: new Date().toISOString(),\r\n        finalOptionsCount: options.length\r\n      });\r\n    }\r\n  }, [onAddStock, searchValue, options.length]);\r\n\r\n  // é˜²æŠ–æœç´¢å‡½æ•°\r\n  const searchStocks = useMemo(\r\n    () => debounce((keyword: string) => {\r\n      performSearch(keyword);\r\n    }, 300),\r\n    [performSearch]\r\n  );\r\n\r\n  // å¤„ç†è¾“å…¥å˜åŒ–æ—¶çš„ä¸‹æ‹‰é€‰é¡¹æ˜¾ç¤ºï¼ˆä»…ç”¨äºå»ºè®®ï¼Œä¸æ‰§è¡Œæœç´¢ï¼‰\r\n  const handleInputChange = (value: string) => {\r\n    setSearchValue(value);\r\n    if (value.trim().length >= 2) {\r\n      // åªæœ‰è¾“å…¥2ä¸ªå­—ç¬¦ä»¥ä¸Šæ‰æ˜¾ç¤ºå»ºè®®ï¼Œä½†ä¸æ‰§è¡Œå®é™…æœç´¢\r\n      searchStocks(value);\r\n    } else if (value.trim() === '') {\r\n      // å½“è¾“å…¥æ¡†ä¸ºç©ºæ—¶ï¼Œæ˜¾ç¤ºå†å²è®°å½•å’Œçƒ­é—¨è‚¡ç¥¨\r\n      setShowHistory(true);\r\n      setOptions([]);\r\n    } else {\r\n      setOptions([]);\r\n      setShowHistory(false);\r\n    }\r\n  };\r\n  \r\n  // å¤„ç†è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹\r\n  const handleFocus = () => {\r\n    if (!searchValue.trim()) {\r\n      setShowHistory(true);\r\n    }\r\n  };\r\n  \r\n  // å¤„ç†è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹\r\n  const handleBlur = () => {\r\n    // å»¶è¿Ÿå…³é—­ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥ç‚¹å‡»å†å²è®°å½•\r\n    setTimeout(() => {\r\n      setShowHistory(false);\r\n    }, 200);\r\n  };\r\n\r\n  // å¤„ç†é€‰æ‹©\r\n  const handleSelect = (value: string, option: OptionType) => {\r\n    onSelectStock(option.stock);\r\n    saveToHistory(option.stock);\r\n    setSearchValue('');\r\n    setOptions([]);\r\n    setShowHistory(false);\r\n  };\r\n  \r\n  // ä»å†å²è®°å½•ä¸­é€‰æ‹©\r\n  const selectFromHistory = (stock: SearchResult) => {\r\n    onSelectStock(stock);\r\n    saveToHistory(stock);\r\n    setSearchValue('');\r\n    setShowHistory(false);\r\n  };\r\n  \r\n  // ä»çƒ­é—¨è‚¡ç¥¨ä¸­é€‰æ‹©\r\n  const selectHotStock = async (hotStock: {code: string, name: string}) => {\r\n    try {\r\n      setLoading(true);\r\n      // å…ˆæ£€æŸ¥ç¼“å­˜\r\n      const cacheKey = CACHE_KEYS.SEARCH_RESULTS(hotStock.code);\r\n      const cached = stockCache.get<any>(cacheKey);\r\n      \r\n      if (cached && cached.success && cached.data && cached.data.length > 0) {\r\n        const stock = cached.data[0];\r\n        onSelectStock(stock);\r\n        saveToHistory(stock);\r\n        message.success(`å·²æ·»åŠ  ${hotStock.name} åˆ°å…³æ³¨åˆ—è¡¨`);\r\n      } else {\r\n        // å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰ï¼Œåˆ™ä»APIè·å–\r\n        const response = await apiService.searchStocks(hotStock.code, 1);\r\n        if (response.success && response.data && response.data.length > 0) {\r\n          const stock = response.data[0];\r\n          onSelectStock(stock);\r\n          saveToHistory(stock);\r\n          message.success(`å·²æ·»åŠ  ${hotStock.name} åˆ°å…³æ³¨åˆ—è¡¨`);\r\n        } else {\r\n          message.error(`æœªæ‰¾åˆ°è‚¡ç¥¨: ${hotStock.name}`);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('æ·»åŠ çƒ­é—¨è‚¡ç¥¨å¤±è´¥:', error);\r\n      message.error(handleApiError(error));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // å¤„ç†æœç´¢æŒ‰é’®ç‚¹å‡»\r\n  const handleSearchClick = async () => {\r\n    const trimmedValue = searchValue.trim();\r\n    if (!trimmedValue) {\r\n      message.warning('è¯·è¾“å…¥æœç´¢å…³é”®è¯');\r\n      return;\r\n    }\r\n\r\n    if (trimmedValue.length < 2) {\r\n      message.warning('è¯·è¾“å…¥è‡³å°‘2ä¸ªå­—ç¬¦');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      console.log('æ‰‹åŠ¨æœç´¢:', trimmedValue);\r\n      const response = await apiService.searchStocks(trimmedValue, 10);\r\n      console.log('æ‰‹åŠ¨æœç´¢å“åº”:', response);\r\n      \r\n      if (response.success && response.data && Array.isArray(response.data) && response.data.length > 0) {\r\n        // å¦‚æœæœç´¢æˆåŠŸä¸”æœ‰ç»“æœï¼Œä¿å­˜ç¬¬ä¸€ä¸ªç»“æœåˆ°å†å²è®°å½•\r\n        saveToHistory(response.data[0]);\r\n        \r\n        const searchOptions: OptionType[] = response.data.map(stock => ({\r\n          value: `${stock.code} ${stock.name}`,\r\n          label: (\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n              <div style={{ flex: 1 }}>\r\n                <div style={{ fontWeight: 500, color: '#ffffff' }}>{stock.name}</div>\r\n                <div style={{ fontSize: '0.8rem', color: '#8b8d97' }}>\r\n                  {stock.code} | Â¥{typeof stock.current_price === 'number' ? stock.current_price.toFixed(2) : '0.00'}\r\n                </div>\r\n              </div>\r\n              <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                <div style={{ textAlign: 'right' }}>\r\n                  <div style={{ \r\n                    color: (stock.change_percent || 0) > 0 ? '#22c55e' : \r\n                           (stock.change_percent || 0) < 0 ? '#ef4444' : '#8b8d97',\r\n                    fontSize: '0.8rem'\r\n                  }}>\r\n                    {(stock.change_percent || 0) > 0 ? '+' : ''}{(stock.change_percent || 0).toFixed(2)}%\r\n                  </div>\r\n                </div>\r\n                {onAddStock && (\r\n                  <Button\r\n                    type=\"primary\"\r\n                    size=\"small\"\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      onAddStock(stock);\r\n                      message.success(`å·²æ·»åŠ  ${stock.name} åˆ°å…³æ³¨åˆ—è¡¨`);\r\n                    }}\r\n                    style={{\r\n                      background: '#667eea',\r\n                      borderColor: '#667eea',\r\n                      fontSize: '0.75rem',\r\n                      height: '24px',\r\n                      padding: '0 8px'\r\n                    }}\r\n                  >\r\n                    æ·»åŠ \r\n                  </Button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ),\r\n          stock\r\n        }));\r\n        setOptions(searchOptions);\r\n        message.success(`æ‰¾åˆ° ${response.data.length} ä¸ªç›¸å…³è‚¡ç¥¨`);\r\n      } else {\r\n        setOptions([]);\r\n        message.info(`æœªæ‰¾åˆ°ä¸\"${trimmedValue}\"ç›¸å…³çš„è‚¡ç¥¨ï¼Œè¯·å°è¯•å…¶ä»–å…³é”®è¯`);\r\n      }\r\n    } catch (error) {\r\n      console.error('æœç´¢å¤±è´¥:', error);\r\n      const errorMessage = handleApiError(error);\r\n      message.error(`æœç´¢å¤±è´¥: ${errorMessage}`);\r\n      setOptions([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // å¤„ç†é”®ç›˜äº‹ä»¶\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter') {\r\n      handleSearchClick();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"search-box-container\" style={{ position: 'relative', zIndex: 1050 }}>\r\n      <div \r\n        className=\"search-input-wrapper\"\r\n        style={{\r\n          position: 'relative',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          width: '100%',\r\n          maxWidth: '600px',\r\n          height: '48px',\r\n          margin: '0 auto',\r\n          marginTop: '0px'\r\n        }}\r\n      >\r\n        <SearchOutlined \r\n          style={{\r\n            position: 'absolute',\r\n            left: '14px',\r\n            color: '#8b8d97',\r\n            fontSize: '16px',\r\n            zIndex: 10\r\n          }}\r\n        />\r\n        <AutoComplete\r\n          value={searchValue}\r\n          options={options}\r\n          onSearch={handleInputChange}\r\n          onSelect={handleSelect}\r\n          onInputKeyDown={handleKeyPress}\r\n          onFocus={handleFocus}\r\n          onBlur={handleBlur}\r\n          placeholder={placeholder}\r\n          style={{\r\n            width: '100%',\r\n            height: '48px'\r\n          }}\r\n          dropdownStyle={{\r\n            background: '#2a2d3a',\r\n            border: '1px solid #3a3d4a',\r\n            borderRadius: '8px',\r\n            zIndex: 1100,\r\n            boxShadow: '0 6px 16px rgba(0, 0, 0, 0.25)',\r\n            maxHeight: '300px',\r\n            overflowY: 'auto'\r\n          }}\r\n          notFoundContent={loading ? 'æœç´¢ä¸­...' : searchValue.trim().length < 2 ? 'è¯·è¾“å…¥è‡³å°‘2ä¸ªå­—ç¬¦' : 'æš‚æ— ç»“æœ'}\r\n          filterOption={false}\r\n          allowClear={false}\r\n          showSearch={false}\r\n        />\r\n        <Button \r\n          type=\"primary\" \r\n          onClick={handleSearchClick}\r\n          loading={loading}\r\n          style={{\r\n            position: 'absolute',\r\n            right: '6px',\r\n            background: '#667eea',\r\n            borderColor: '#667eea',\r\n            borderRadius: '20px',\r\n            padding: '8px 16px',\r\n            fontSize: '14px',\r\n            fontWeight: 500,\r\n            zIndex: 10,\r\n            height: '36px',\r\n            lineHeight: '20px'\r\n          }}\r\n        >\r\n          æœç´¢\r\n        </Button>\r\n      </div>\r\n      \r\n      {/* å¢å¼ºçš„æ ·å¼éš”ç¦» */}\r\n      <style dangerouslySetInnerHTML={{\r\n        __html: `\r\n          /* æœç´¢æ¡†å®¹å™¨æ ·å¼ - é«˜ç‰¹å¼‚æ€§ç¡®ä¿ä¸è¢«å…¨å±€æ ·å¼è¦†ç›– */\r\n          .search-box-container {\r\n            position: relative;\r\n            display: flex;\r\n            align-items: center;\r\n            width: 100%;\r\n            max-width: 600px;\r\n            margin: 0 auto;\r\n          }\r\n\r\n          /* æœç´¢æ¡†ä¸»ä½“æ ·å¼ - ä½¿ç”¨é«˜ç‰¹å¼‚æ€§é€‰æ‹©å™¨ */\r\n          .search-box-container .ant-select.ant-select-auto-complete {\r\n            width: 100% !important;\r\n            height: 48px !important;\r\n          }\r\n\r\n          .search-box-container .ant-select.ant-select-auto-complete .ant-select-selector {\r\n            background: #2a2d3a !important;\r\n            border: 1px solid #3a3d4a !important;\r\n            border-radius: 24px !important;\r\n            padding: 0 60px 0 40px !important;\r\n            height: 48px !important;\r\n            color: #ffffff !important;\r\n            display: flex !important;\r\n            align-items: center !important;\r\n            min-height: 48px !important;\r\n            box-sizing: border-box !important;\r\n            line-height: 24px !important;\r\n            transition: all 0.3s ease !important;\r\n          }\r\n\r\n          .search-box-container .ant-select.ant-select-auto-complete .ant-select-selector:hover {\r\n            border-color: #667eea !important;\r\n          }\r\n\r\n          .search-box-container .ant-select.ant-select-auto-complete .ant-select-selection-search {\r\n            left: 40px !important;\r\n            right: 60px !important;\r\n            height: 100% !important;\r\n            display: flex !important;\r\n            align-items: center !important;\r\n          }\r\n\r\n          .search-box-container .ant-select.ant-select-auto-complete .ant-select-selection-search-input {\r\n            background: transparent !important;\r\n            border: none !important;\r\n            color: #ffffff !important;\r\n            height: 100% !important;\r\n            line-height: 24px !important;\r\n            font-size: 14px !important;\r\n            padding: 0 !important;\r\n            margin: 0 !important;\r\n            outline: none !important;\r\n          }\r\n\r\n          .search-box-container .ant-select.ant-select-auto-complete .ant-select-selection-placeholder {\r\n            color: #8b8d97 !important;\r\n            left: 40px !important;\r\n            right: 60px !important;\r\n            line-height: 24px !important;\r\n            display: flex !important;\r\n            align-items: center !important;\r\n            height: 100% !important;\r\n            font-size: 14px !important;\r\n          }\r\n\r\n          .search-box-container .ant-select.ant-select-auto-complete.ant-select-focused .ant-select-selector {\r\n            border-color: #667eea !important;\r\n            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2) !important;\r\n          }\r\n\r\n          /* ä¸‹æ‹‰èœå•æ ·å¼ */\r\n          .search-box-container .ant-select-dropdown {\r\n            background: #2a2d3a !important;\r\n            border: 1px solid #3a3d4a !important;\r\n            border-radius: 8px !important;\r\n            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25) !important;\r\n            z-index: 1100 !important;\r\n          }\r\n\r\n          .search-box-container .ant-select-item {\r\n            color: #ffffff !important;\r\n            background: transparent !important;\r\n            padding: 8px 12px !important;\r\n            transition: all 0.2s ease !important;\r\n          }\r\n\r\n          .search-box-container .ant-select-item:hover {\r\n            background: #3a3d4a !important;\r\n          }\r\n\r\n          .search-box-container .ant-select-item-option-selected {\r\n            background: #667eea !important;\r\n          }\r\n\r\n          .search-box-container .ant-empty {\r\n            color: #8b8d97 !important;\r\n          }\r\n\r\n          .search-box-container .ant-empty-description {\r\n            color: #8b8d97 !important;\r\n          }\r\n        `\r\n      }} />\r\n      \r\n      {/* æœç´¢å†å²å’Œçƒ­é—¨è‚¡ç¥¨ */}\r\n      {showHistory && (\r\n        <div style={{\r\n          position: 'absolute',\r\n          top: '52px', // è°ƒæ•´é¡¶éƒ¨è·ç¦»ï¼Œç¡®ä¿ä¸ä¸æœç´¢æ¡†é‡å \r\n          left: '0',\r\n          right: '0',\r\n          width: '100%',\r\n          maxWidth: '600px',\r\n          margin: '0 auto',\r\n          background: '#2a2d3a',\r\n          border: '1px solid #3a3d4a',\r\n          borderRadius: '8px',\r\n          padding: '12px',\r\n          zIndex: 1200, // æé«˜z-indexç¡®ä¿åœ¨å…¶ä»–å…ƒç´ ä¹‹ä¸Š\r\n          boxShadow: '0 6px 16px rgba(0, 0, 0, 0.25)',\r\n          maxHeight: '400px', // é™åˆ¶æœ€å¤§é«˜åº¦\r\n          overflowY: 'auto' // å†…å®¹è¿‡å¤šæ—¶å¯æ»šåŠ¨\r\n        }}>\r\n          {/* æœç´¢å†å² */}\r\n          {searchHistory.length > 0 && (\r\n            <div>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '8px' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\r\n                  <HistoryOutlined style={{ color: '#8b8d97' }} />\r\n                  <span style={{ color: '#8b8d97', fontSize: '12px' }}>æœç´¢å†å²</span>\r\n                </div>\r\n                <Button \r\n                  type=\"text\" \r\n                  size=\"small\" \r\n                  icon={<DeleteOutlined />} \r\n                  onClick={clearSearchHistory}\r\n                  style={{ color: '#8b8d97', fontSize: '12px' }}\r\n                >\r\n                  æ¸…ç©º\r\n                </Button>\r\n              </div>\r\n              <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px', marginBottom: '12px' }}>\r\n                {searchHistory.map((stock) => (\r\n                  <Tag \r\n                    key={stock.code}\r\n                    style={{\r\n                      background: '#3a3d4a',\r\n                      borderColor: '#4a4d5a',\r\n                      color: '#ffffff',\r\n                      cursor: 'pointer',\r\n                      padding: '4px 8px',\r\n                      borderRadius: '4px',\r\n                      transition: 'all 0.2s ease'\r\n                    }}\r\n                    onClick={() => selectFromHistory(stock)}\r\n                    onMouseEnter={(e) => {\r\n                      e.currentTarget.style.background = '#4a4d5a';\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      e.currentTarget.style.background = '#3a3d4a';\r\n                    }}\r\n                  >\r\n                    {stock.name} ({stock.code})\r\n                  </Tag>\r\n                ))}\r\n              </div>\r\n              <Divider style={{ margin: '8px 0', borderColor: '#3a3d4a' }} />\r\n            </div>\r\n          )}\r\n          \r\n          {/* çƒ­é—¨è‚¡ç¥¨ */}\r\n          <div>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '6px', marginBottom: '8px' }}>\r\n              <FireOutlined style={{ color: '#f59e0b' }} />\r\n              <span style={{ color: '#8b8d97', fontSize: '12px' }}>çƒ­é—¨è‚¡ç¥¨</span>\r\n            </div>\r\n            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>\r\n              {HOT_STOCKS.map((stock) => (\r\n                <Tooltip key={stock.code} title={`æ·»åŠ ${stock.name}åˆ°å…³æ³¨åˆ—è¡¨`}>\r\n                  <Tag \r\n                    style={{\r\n                      background: '#3a3d4a',\r\n                      borderColor: '#4a4d5a',\r\n                      color: '#ffffff',\r\n                      cursor: 'pointer',\r\n                      padding: '4px 8px',\r\n                      borderRadius: '4px',\r\n                      transition: 'all 0.2s ease'\r\n                    }}\r\n                    onClick={() => selectHotStock(stock)}\r\n                    onMouseEnter={(e) => {\r\n                      e.currentTarget.style.background = '#4a4d5a';\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      e.currentTarget.style.background = '#3a3d4a';\r\n                    }}\r\n                  >\r\n                    {stock.name} ({stock.code})\r\n                  </Tag>\r\n                </Tooltip>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchBox;"],"mappings":"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;UAChBN,UAAU,EAAE,GAAG;UACfwD,MAAM,EAAE,EAAE;UACVvC,MAAM,EAAE,MAAM;UACd6D,UAAU,EAAE;QACd,CAAE;QAAAhF,QAAA,EACH;MAED;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,eAGNlF,OAAA;MAAO4J,uBAAuB,EAAE;QAC9BC,MAAM,EAAE;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACM;IAAE;MAAA9E,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EAGJhE,WAAW,iBACVlB,OAAA;MAAKuE,KAAK,EAAE;QACV6D,QAAQ,EAAE,UAAU;QACpB0B,GAAG,EAAE,MAAM;QAAE;QACbpB,IAAI,EAAE,GAAG;QACTgB,KAAK,EAAE,GAAG;QACVpB,KAAK,EAAE,MAAM;QACbC,QAAQ,EAAE,OAAO;QACjBC,MAAM,EAAE,QAAQ;QAChB5C,UAAU,EAAE,SAAS;QACrBqD,MAAM,EAAE,mBAAmB;QAC3BC,YAAY,EAAE,KAAK;QACnBnD,OAAO,EAAE,MAAM;QACfsC,MAAM,EAAE,IAAI;QAAE;QACdc,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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}