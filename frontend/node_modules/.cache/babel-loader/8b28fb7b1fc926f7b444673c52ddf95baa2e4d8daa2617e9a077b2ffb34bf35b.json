{"ast":null,"code":"import React,{useState,useCallback,useMemo,useEffect}from'react';import{AutoComplete,Button,message,Divider,Tag,Tooltip}from'antd';import{SearchOutlined,HistoryOutlined,FireOutlined,DeleteOutlined}from'@ant-design/icons';import{apiService}from'../services/api';import{debounce,handleApiError}from'../utils/helpers';import{stockCache,CACHE_KEYS}from'../utils/stockCache';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";// 热门股票列表\nconst HOT_STOCKS=[{code:'600519',name:'贵州茅台'},{code:'300750',name:'宁德时代'},{code:'002594',name:'比亚迪'},{code:'600036',name:'招商银行'},{code:'601318',name:'中国平安'},{code:'600276',name:'恒瑞医药'},{code:'601888',name:'中国中免'},{code:'000858',name:'五粮液'}];// 搜索历史本地存储键名\nconst SEARCH_HISTORY_KEY='stock_search_history';const SearchBox=_ref=>{let{onSelectStock,onAddStock,placeholder=\"搜索股票代码或名称...\"}=_ref;const[options,setOptions]=useState([]);const[loading,setLoading]=useState(false);const[searchValue,setSearchValue]=useState('');const[searchHistory,setSearchHistory]=useState([]);const[showHistory,setShowHistory]=useState(false);// 加载搜索历史\nuseEffect(()=>{try{const historyJson=localStorage.getItem(SEARCH_HISTORY_KEY);if(historyJson){const history=JSON.parse(historyJson);setSearchHistory(history);}}catch(error){console.error('加载搜索历史失败:',error);}},[]);// 保存搜索历史\nconst saveToHistory=stock=>{try{// 检查是否已存在\nconst exists=searchHistory.some(item=>item.code===stock.code);if(!exists){// 添加到历史记录前端，限制为10条\nconst newHistory=[stock,...searchHistory].slice(0,10);setSearchHistory(newHistory);// 保存到localStorage\nlocalStorage.setItem(SEARCH_HISTORY_KEY,JSON.stringify(newHistory));}else{// 如果已存在，将其移到最前面\nconst newHistory=[stock,...searchHistory.filter(item=>item.code!==stock.code)].slice(0,10);setSearchHistory(newHistory);localStorage.setItem(SEARCH_HISTORY_KEY,JSON.stringify(newHistory));}}catch(error){console.error('保存搜索历史失败:',error);}};// 清空搜索历史\nconst clearSearchHistory=e=>{e.stopPropagation();try{localStorage.removeItem(SEARCH_HISTORY_KEY);setSearchHistory([]);message.success('搜索历史已清空');}catch(error){console.error('清空搜索历史失败:',error);message.error('清空搜索历史失败');}};// 搜索股票的核心逻辑\nconst performSearch=useCallback(async keyword=>{if(!keyword.trim()){setOptions([]);return;}setLoading(true);try{const response=await apiService.searchStocks(keyword,10);if(response.success&&response.data){const searchOptions=response.data.map(stock=>({value:`${stock.code} ${stock.name}`,label:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:500,color:'#ffffff'},children:stock.name}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.8rem',color:'#8b8d97'},children:[stock.code,\" | \\xA5\",stock.current_price.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'right'},children:/*#__PURE__*/_jsxs(\"div\",{style:{color:stock.change_percent>0?'#22c55e':stock.change_percent<0?'#ef4444':'#8b8d97',fontSize:'0.8rem'},children:[stock.change_percent>0?'+':'',stock.change_percent.toFixed(2),\"%\"]})}),onAddStock&&/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"small\",onClick:e=>{e.stopPropagation();onAddStock(stock);},style:{background:'#667eea',borderColor:'#667eea',fontSize:'0.75rem',height:'24px',padding:'0 8px'},children:\"\\u6DFB\\u52A0\"})]})]}),stock}));setOptions(searchOptions);}else{setOptions([]);}}catch(error){console.error('搜索失败:',error);message.error(handleApiError(error));setOptions([]);}finally{setLoading(false);}},[onAddStock]);// 防抖搜索函数\nconst searchStocks=useMemo(()=>debounce(keyword=>{performSearch(keyword);},300),[performSearch]);// 处理输入变化时的下拉选项显示（仅用于建议，不执行搜索）\nconst handleInputChange=value=>{setSearchValue(value);if(value.trim().length>=2){// 只有输入2个字符以上才显示建议，但不执行实际搜索\nsearchStocks(value);}else if(value.trim()===''){// 当输入框为空时，显示历史记录和热门股票\nsetShowHistory(true);setOptions([]);}else{setOptions([]);setShowHistory(false);}};// 处理输入框获得焦点\nconst handleFocus=()=>{if(!searchValue.trim()){setShowHistory(true);}};// 处理输入框失去焦点\nconst handleBlur=()=>{// 延迟关闭，以便用户可以点击历史记录\nsetTimeout(()=>{setShowHistory(false);},200);};// 处理选择\nconst handleSelect=(value,option)=>{onSelectStock(option.stock);saveToHistory(option.stock);setSearchValue('');setOptions([]);setShowHistory(false);};// 从历史记录中选择\nconst selectFromHistory=stock=>{onSelectStock(stock);saveToHistory(stock);setSearchValue('');setShowHistory(false);};// 从热门股票中选择\nconst selectHotStock=async hotStock=>{try{setLoading(true);// 先检查缓存\nconst cacheKey=CACHE_KEYS.SEARCH_RESULTS(hotStock.code);const cached=stockCache.get(cacheKey);if(cached&&cached.success&&cached.data&&cached.data.length>0){const stock=cached.data[0];onSelectStock(stock);saveToHistory(stock);message.success(`已添加 ${hotStock.name} 到关注列表`);}else{// 如果缓存中没有，则从API获取\nconst response=await apiService.searchStocks(hotStock.code,1);if(response.success&&response.data&&response.data.length>0){const stock=response.data[0];onSelectStock(stock);saveToHistory(stock);message.success(`已添加 ${hotStock.name} 到关注列表`);}else{message.error(`未找到股票: ${hotStock.name}`);}}}catch(error){console.error('添加热门股票失败:',error);message.error(handleApiError(error));}finally{setLoading(false);}};// 处理搜索按钮点击\nconst handleSearchClick=async()=>{if(searchValue.trim()){setLoading(true);try{const response=await apiService.searchStocks(searchValue,10);if(response.success&&response.data&&response.data.length>0){// 如果搜索成功且有结果，保存第一个结果到历史记录\nif(response.data[0]){saveToHistory(response.data[0]);}const searchOptions=response.data.map(stock=>({value:`${stock.code} ${stock.name}`,label:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:500,color:'#ffffff'},children:stock.name}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.8rem',color:'#8b8d97'},children:[stock.code,\" | \\xA5\",stock.current_price.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'right'},children:/*#__PURE__*/_jsxs(\"div\",{style:{color:stock.change_percent>0?'#22c55e':stock.change_percent<0?'#ef4444':'#8b8d97',fontSize:'0.8rem'},children:[stock.change_percent>0?'+':'',stock.change_percent.toFixed(2),\"%\"]})}),onAddStock&&/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"small\",onClick:e=>{e.stopPropagation();onAddStock(stock);},style:{background:'#667eea',borderColor:'#667eea',fontSize:'0.75rem',height:'24px',padding:'0 8px'},children:\"\\u6DFB\\u52A0\"})]})]}),stock}));setOptions(searchOptions);message.success(`找到 ${response.data.length} 个相关股票`);}else{setOptions([]);message.info('未找到相关股票，请尝试其他关键词');}}catch(error){console.error('搜索失败:',error);message.error(handleApiError(error));setOptions([]);}finally{setLoading(false);}}else{message.warning('请输入搜索关键词');}};// 处理键盘事件\nconst handleKeyPress=e=>{if(e.key==='Enter'){handleSearchClick();}};return/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',zIndex:1050},children:[\" \",/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',display:'flex',alignItems:'center',width:'100%',// 修改为100%宽度以适应父容器\nmaxWidth:'600px',// 设置最大宽度\nheight:'48px',margin:'0 auto',marginTop:'0px'},children:[/*#__PURE__*/_jsx(SearchOutlined,{style:{position:'absolute',left:'14px',color:'#8b8d97',fontSize:'16px',zIndex:10}}),/*#__PURE__*/_jsx(AutoComplete,{value:searchValue,options:options,onSearch:handleInputChange,onSelect:handleSelect,onInputKeyDown:handleKeyPress,onFocus:handleFocus,onBlur:handleBlur,placeholder:placeholder,style:{width:'100%',height:'48px'},dropdownStyle:{background:'#2a2d3a',border:'1px solid #3a3d4a',borderRadius:'8px',zIndex:1000},notFoundContent:loading?'搜索中...':searchValue.trim().length<2?'请输入至少2个字符':'暂无结果',filterOption:false}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:handleSearchClick,loading:loading,style:{position:'absolute',right:'6px',background:'#667eea',borderColor:'#667eea',borderRadius:'20px',padding:'8px 16px',fontSize:'14px',fontWeight:500,zIndex:10,height:'36px',lineHeight:'20px'},children:\"\\u641C\\u7D22\"}),/*#__PURE__*/_jsx(\"style\",{dangerouslySetInnerHTML:{__html:`\n          .ant-select-selector {\n            background: #2a2d3a !important;\n            border: 1px solid #3a3d4a !important;\n            border-radius: 24px !important;\n            padding: 0 50px 0 40px !important;\n            height: 48px !important;\n            color: #ffffff !important;\n            display: flex !important;\n            align-items: center !important;\n          }\n          .ant-select-selection-search-input {\n            background: transparent !important;\n            border: none !important;\n            color: #ffffff !important;\n            height: 100% !important;\n          }\n          .ant-select-selection-placeholder {\n            color: #8b8d97 !important;\n            left: 40px !important;\n          }\n        `}})]}),showHistory&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:'60px',// 增加顶部距离，避免与搜索框重叠\nleft:'50%',transform:'translateX(-50%)',// 居中显示\nwidth:'320px',background:'#2a2d3a',border:'1px solid #3a3d4a',borderRadius:'8px',padding:'12px',zIndex:1051,// 提高z-index确保在其他元素之上\nboxShadow:'0 6px 16px rgba(0, 0, 0, 0.25)',maxHeight:'400px',// 限制最大高度\noverflowY:'auto'// 内容过多时可滚动\n},children:[searchHistory.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'8px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'6px'},children:[/*#__PURE__*/_jsx(HistoryOutlined,{style:{color:'#8b8d97'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#8b8d97',fontSize:'12px'},children:\"\\u641C\\u7D22\\u5386\\u53F2\"})]}),/*#__PURE__*/_jsx(Button,{type:\"text\",size:\"small\",icon:/*#__PURE__*/_jsx(DeleteOutlined,{}),onClick:clearSearchHistory,style:{color:'#8b8d97',fontSize:'12px'},children:\"\\u6E05\\u7A7A\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:'8px',marginBottom:'12px'},children:searchHistory.map(stock=>/*#__PURE__*/_jsxs(Tag,{style:{background:'#3a3d4a',borderColor:'#4a4d5a',color:'#ffffff',cursor:'pointer',padding:'4px 8px',borderRadius:'4px'},onClick:()=>selectFromHistory(stock),children:[stock.name,\" (\",stock.code,\")\"]},stock.code))}),/*#__PURE__*/_jsx(Divider,{style:{margin:'8px 0',borderColor:'#3a3d4a'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'6px',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(FireOutlined,{style:{color:'#f59e0b'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#8b8d97',fontSize:'12px'},children:\"\\u70ED\\u95E8\\u80A1\\u7968\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:'8px'},children:HOT_STOCKS.map(stock=>/*#__PURE__*/_jsx(Tooltip,{title:`添加${stock.name}到关注列表`,children:/*#__PURE__*/_jsxs(Tag,{style:{background:'#3a3d4a',borderColor:'#4a4d5a',color:'#ffffff',cursor:'pointer',padding:'4px 8px',borderRadius:'4px'},onClick:()=>selectHotStock(stock),children:[stock.name,\" (\",stock.code,\")\"]})},stock.code))})]})]})]});};export default SearchBox;","map":{"version":3,"names":["React","useState","useCallback","useMemo","useEffect","AutoComplete","Button","message","Divider","Tag","Tooltip","SearchOutlined","HistoryOutlined","FireOutlined","DeleteOutlined","apiService","debounce","handleApiError","stockCache","CACHE_KEYS","jsx","_jsx","jsxs","_jsxs","HOT_STOCKS","code","name","SEARCH_HISTORY_KEY","SearchBox","_ref","onSelectStock","onAddStock","placeholder","options","setOptions","loading","setLoading","searchValue","setSearchValue","searchHistory","setSearchHistory","showHistory","setShowHistory","historyJson","localStorage","getItem","history","JSON","parse","error","console","saveToHistory","stock","exists","some","item","newHistory","slice","setItem","stringify","filter","clearSearchHistory","e","stopPropagation","removeItem","success","performSearch","keyword","trim","response","searchStocks","data","searchOptions","map","value","label","style","display","justifyContent","alignItems","children","flex","fontWeight","color","fontSize","current_price","toFixed","gap","textAlign","change_percent","type","size","onClick","background","borderColor","height","padding","handleInputChange","length","handleFocus","handleBlur","setTimeout","handleSelect","option","selectFromHistory","selectHotStock","hotStock","cacheKey","SEARCH_RESULTS","cached","get","handleSearchClick","info","warning","handleKeyPress","key","position","zIndex","width","maxWidth","margin","marginTop","left","onSearch","onSelect","onInputKeyDown","onFocus","onBlur","dropdownStyle","border","borderRadius","notFoundContent","filterOption","right","lineHeight","dangerouslySetInnerHTML","__html","top","transform","boxShadow","maxHeight","overflowY","marginBottom","icon","flexWrap","cursor","title"],"sources":["E:/AICode/StockInsight/frontend/src/components/SearchBox.tsx"],"sourcesContent":["import React, { useState, useCallback, useMemo, useEffect } from 'react';\r\nimport { AutoComplete, Button, message, Divider, Tag, Tooltip } from 'antd';\r\nimport { SearchOutlined, HistoryOutlined, FireOutlined, DeleteOutlined } from '@ant-design/icons';\r\nimport { apiService, SearchResult } from '../services/api';\r\nimport { debounce, handleApiError } from '../utils/helpers';\r\nimport { stockCache, CACHE_KEYS } from '../utils/stockCache';\r\n\r\ninterface SearchBoxProps {\r\n  onSelectStock: (stock: SearchResult) => void;\r\n  onAddStock?: (stock: SearchResult) => void;\r\n  placeholder?: string;\r\n}\r\n\r\n// 热门股票列表\r\nconst HOT_STOCKS = [\r\n  { code: '600519', name: '贵州茅台' },\r\n  { code: '300750', name: '宁德时代' },\r\n  { code: '002594', name: '比亚迪' },\r\n  { code: '600036', name: '招商银行' },\r\n  { code: '601318', name: '中国平安' },\r\n  { code: '600276', name: '恒瑞医药' },\r\n  { code: '601888', name: '中国中免' },\r\n  { code: '000858', name: '五粮液' }\r\n];\r\n\r\n// 搜索历史本地存储键名\r\nconst SEARCH_HISTORY_KEY = 'stock_search_history';\r\n\r\ninterface OptionType {\r\n  value: string;\r\n  label: React.ReactNode;\r\n  stock: SearchResult;\r\n}\r\n\r\nconst SearchBox: React.FC<SearchBoxProps> = ({ \r\n  onSelectStock,\r\n  onAddStock,\r\n  placeholder = \"搜索股票代码或名称...\" \r\n}) => {\r\n  const [options, setOptions] = useState<OptionType[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const [searchHistory, setSearchHistory] = useState<SearchResult[]>([]);\r\n  const [showHistory, setShowHistory] = useState(false);\r\n\r\n  // 加载搜索历史\r\n  useEffect(() => {\r\n    try {\r\n      const historyJson = localStorage.getItem(SEARCH_HISTORY_KEY);\r\n      if (historyJson) {\r\n        const history = JSON.parse(historyJson);\r\n        setSearchHistory(history);\r\n      }\r\n    } catch (error) {\r\n      console.error('加载搜索历史失败:', error);\r\n    }\r\n  }, []);\r\n\r\n  // 保存搜索历史\r\n  const saveToHistory = (stock: SearchResult) => {\r\n    try {\r\n      // 检查是否已存在\r\n      const exists = searchHistory.some(item => item.code === stock.code);\r\n      if (!exists) {\r\n        // 添加到历史记录前端，限制为10条\r\n        const newHistory = [stock, ...searchHistory].slice(0, 10);\r\n        setSearchHistory(newHistory);\r\n        // 保存到localStorage\r\n        localStorage.setItem(SEARCH_HISTORY_KEY, JSON.stringify(newHistory));\r\n      } else {\r\n        // 如果已存在，将其移到最前面\r\n        const newHistory = [\r\n          stock,\r\n          ...searchHistory.filter(item => item.code !== stock.code)\r\n        ].slice(0, 10);\r\n        setSearchHistory(newHistory);\r\n        localStorage.setItem(SEARCH_HISTORY_KEY, JSON.stringify(newHistory));\r\n      }\r\n    } catch (error) {\r\n      console.error('保存搜索历史失败:', error);\r\n    }\r\n  };\r\n\r\n  // 清空搜索历史\r\n  const clearSearchHistory = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    try {\r\n      localStorage.removeItem(SEARCH_HISTORY_KEY);\r\n      setSearchHistory([]);\r\n      message.success('搜索历史已清空');\r\n    } catch (error) {\r\n      console.error('清空搜索历史失败:', error);\r\n      message.error('清空搜索历史失败');\r\n    }\r\n  };\r\n\r\n  // 搜索股票的核心逻辑\r\n  const performSearch = useCallback(async (keyword: string) => {\r\n    if (!keyword.trim()) {\r\n      setOptions([]);\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const response = await apiService.searchStocks(keyword, 10);\r\n      if (response.success && response.data) {\r\n        const searchOptions: OptionType[] = response.data.map(stock => ({\r\n          value: `${stock.code} ${stock.name}`,\r\n          label: (\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n              <div style={{ flex: 1 }}>\r\n                <div style={{ fontWeight: 500, color: '#ffffff' }}>{stock.name}</div>\r\n                <div style={{ fontSize: '0.8rem', color: '#8b8d97' }}>\r\n                  {stock.code} | ¥{stock.current_price.toFixed(2)}\r\n                </div>\r\n              </div>\r\n              <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                <div style={{ textAlign: 'right' }}>\r\n                  <div style={{ \r\n                    color: stock.change_percent > 0 ? '#22c55e' : \r\n                           stock.change_percent < 0 ? '#ef4444' : '#8b8d97',\r\n                    fontSize: '0.8rem'\r\n                  }}>\r\n                    {stock.change_percent > 0 ? '+' : ''}{stock.change_percent.toFixed(2)}%\r\n                  </div>\r\n                </div>\r\n                {onAddStock && (\r\n                  <Button\r\n                    type=\"primary\"\r\n                    size=\"small\"\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      onAddStock(stock);\r\n                    }}\r\n                    style={{\r\n                      background: '#667eea',\r\n                      borderColor: '#667eea',\r\n                      fontSize: '0.75rem',\r\n                      height: '24px',\r\n                      padding: '0 8px'\r\n                    }}\r\n                  >\r\n                    添加\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ),\r\n          stock\r\n        }));\r\n        setOptions(searchOptions);\r\n      } else {\r\n        setOptions([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('搜索失败:', error);\r\n      message.error(handleApiError(error));\r\n      setOptions([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [onAddStock]);\r\n\r\n  // 防抖搜索函数\r\n  const searchStocks = useMemo(\r\n    () => debounce((keyword: string) => {\r\n      performSearch(keyword);\r\n    }, 300),\r\n    [performSearch]\r\n  );\r\n\r\n  // 处理输入变化时的下拉选项显示（仅用于建议，不执行搜索）\r\n  const handleInputChange = (value: string) => {\r\n    setSearchValue(value);\r\n    if (value.trim().length >= 2) {\r\n      // 只有输入2个字符以上才显示建议，但不执行实际搜索\r\n      searchStocks(value);\r\n    } else if (value.trim() === '') {\r\n      // 当输入框为空时，显示历史记录和热门股票\r\n      setShowHistory(true);\r\n      setOptions([]);\r\n    } else {\r\n      setOptions([]);\r\n      setShowHistory(false);\r\n    }\r\n  };\r\n  \r\n  // 处理输入框获得焦点\r\n  const handleFocus = () => {\r\n    if (!searchValue.trim()) {\r\n      setShowHistory(true);\r\n    }\r\n  };\r\n  \r\n  // 处理输入框失去焦点\r\n  const handleBlur = () => {\r\n    // 延迟关闭，以便用户可以点击历史记录\r\n    setTimeout(() => {\r\n      setShowHistory(false);\r\n    }, 200);\r\n  };\r\n\r\n  // 处理选择\r\n  const handleSelect = (value: string, option: OptionType) => {\r\n    onSelectStock(option.stock);\r\n    saveToHistory(option.stock);\r\n    setSearchValue('');\r\n    setOptions([]);\r\n    setShowHistory(false);\r\n  };\r\n  \r\n  // 从历史记录中选择\r\n  const selectFromHistory = (stock: SearchResult) => {\r\n    onSelectStock(stock);\r\n    saveToHistory(stock);\r\n    setSearchValue('');\r\n    setShowHistory(false);\r\n  };\r\n  \r\n  // 从热门股票中选择\r\n  const selectHotStock = async (hotStock: {code: string, name: string}) => {\r\n    try {\r\n      setLoading(true);\r\n      // 先检查缓存\r\n      const cacheKey = CACHE_KEYS.SEARCH_RESULTS(hotStock.code);\r\n      const cached = stockCache.get<any>(cacheKey);\r\n      \r\n      if (cached && cached.success && cached.data && cached.data.length > 0) {\r\n        const stock = cached.data[0];\r\n        onSelectStock(stock);\r\n        saveToHistory(stock);\r\n        message.success(`已添加 ${hotStock.name} 到关注列表`);\r\n      } else {\r\n        // 如果缓存中没有，则从API获取\r\n        const response = await apiService.searchStocks(hotStock.code, 1);\r\n        if (response.success && response.data && response.data.length > 0) {\r\n          const stock = response.data[0];\r\n          onSelectStock(stock);\r\n          saveToHistory(stock);\r\n          message.success(`已添加 ${hotStock.name} 到关注列表`);\r\n        } else {\r\n          message.error(`未找到股票: ${hotStock.name}`);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('添加热门股票失败:', error);\r\n      message.error(handleApiError(error));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // 处理搜索按钮点击\r\n  const handleSearchClick = async () => {\r\n    if (searchValue.trim()) {\r\n      setLoading(true);\r\n      try {\r\n        const response = await apiService.searchStocks(searchValue, 10);\r\n        if (response.success && response.data && response.data.length > 0) {\r\n          // 如果搜索成功且有结果，保存第一个结果到历史记录\r\n          if (response.data[0]) {\r\n            saveToHistory(response.data[0]);\r\n          }\r\n          const searchOptions: OptionType[] = response.data.map(stock => ({\r\n            value: `${stock.code} ${stock.name}`,\r\n            label: (\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <div style={{ flex: 1 }}>\r\n                  <div style={{ fontWeight: 500, color: '#ffffff' }}>{stock.name}</div>\r\n                  <div style={{ fontSize: '0.8rem', color: '#8b8d97' }}>\r\n                    {stock.code} | ¥{stock.current_price.toFixed(2)}\r\n                  </div>\r\n                </div>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                  <div style={{ textAlign: 'right' }}>\r\n                    <div style={{ \r\n                      color: stock.change_percent > 0 ? '#22c55e' : \r\n                             stock.change_percent < 0 ? '#ef4444' : '#8b8d97',\r\n                      fontSize: '0.8rem'\r\n                    }}>\r\n                      {stock.change_percent > 0 ? '+' : ''}{stock.change_percent.toFixed(2)}%\r\n                    </div>\r\n                  </div>\r\n                  {onAddStock && (\r\n                    <Button\r\n                      type=\"primary\"\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        onAddStock(stock);\r\n                      }}\r\n                      style={{\r\n                        background: '#667eea',\r\n                        borderColor: '#667eea',\r\n                        fontSize: '0.75rem',\r\n                        height: '24px',\r\n                        padding: '0 8px'\r\n                      }}\r\n                    >\r\n                      添加\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ),\r\n            stock\r\n          }));\r\n          setOptions(searchOptions);\r\n          message.success(`找到 ${response.data.length} 个相关股票`);\r\n        } else {\r\n          setOptions([]);\r\n          message.info('未找到相关股票，请尝试其他关键词');\r\n        }\r\n      } catch (error) {\r\n        console.error('搜索失败:', error);\r\n        message.error(handleApiError(error));\r\n        setOptions([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    } else {\r\n      message.warning('请输入搜索关键词');\r\n    }\r\n  };\r\n\r\n  // 处理键盘事件\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter') {\r\n      handleSearchClick();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ position: 'relative', zIndex: 1050 }}> {/* 增加 z-index 确保下拉内容在其他元素之上 */}\r\n      <div \r\n          style={{\r\n            position: 'relative',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            width: '100%', // 修改为100%宽度以适应父容器\r\n            maxWidth: '600px', // 设置最大宽度\r\n            height: '48px',\r\n            margin: '0 auto',\r\n            marginTop: '0px'\r\n          }}\r\n        >\r\n        <SearchOutlined \r\n          style={{\r\n            position: 'absolute',\r\n            left: '14px',\r\n            color: '#8b8d97',\r\n            fontSize: '16px',\r\n            zIndex: 10\r\n          }}\r\n        />\r\n        <AutoComplete\r\n          value={searchValue}\r\n          options={options}\r\n          onSearch={handleInputChange}\r\n          onSelect={handleSelect}\r\n          onInputKeyDown={handleKeyPress}\r\n          onFocus={handleFocus}\r\n          onBlur={handleBlur}\r\n          placeholder={placeholder}\r\n          style={{\r\n            width: '100%',\r\n            height: '48px'\r\n          }}\r\n          dropdownStyle={{\r\n            background: '#2a2d3a',\r\n            border: '1px solid #3a3d4a',\r\n            borderRadius: '8px',\r\n            zIndex: 1000\r\n          }}\r\n          notFoundContent={loading ? '搜索中...' : searchValue.trim().length < 2 ? '请输入至少2个字符' : '暂无结果'}\r\n          filterOption={false}\r\n        />\r\n      <Button \r\n        type=\"primary\" \r\n        onClick={handleSearchClick}\r\n        loading={loading}\r\n        style={{\r\n          position: 'absolute',\r\n          right: '6px',\r\n          background: '#667eea',\r\n          borderColor: '#667eea',\r\n          borderRadius: '20px',\r\n          padding: '8px 16px',\r\n          fontSize: '14px',\r\n          fontWeight: 500,\r\n          zIndex: 10,\r\n          height: '36px',\r\n          lineHeight: '20px'\r\n        }}\r\n      >\r\n        搜索\r\n      </Button>\r\n      <style dangerouslySetInnerHTML={{\r\n        __html: `\r\n          .ant-select-selector {\r\n            background: #2a2d3a !important;\r\n            border: 1px solid #3a3d4a !important;\r\n            border-radius: 24px !important;\r\n            padding: 0 50px 0 40px !important;\r\n            height: 48px !important;\r\n            color: #ffffff !important;\r\n            display: flex !important;\r\n            align-items: center !important;\r\n          }\r\n          .ant-select-selection-search-input {\r\n            background: transparent !important;\r\n            border: none !important;\r\n            color: #ffffff !important;\r\n            height: 100% !important;\r\n          }\r\n          .ant-select-selection-placeholder {\r\n            color: #8b8d97 !important;\r\n            left: 40px !important;\r\n          }\r\n        `\r\n      }} />\r\n      </div>\r\n      \r\n      {/* 搜索历史和热门股票 */}\r\n      {showHistory && (\r\n        <div style={{\r\n          position: 'absolute',\r\n          top: '60px', // 增加顶部距离，避免与搜索框重叠\r\n          left: '50%',\r\n          transform: 'translateX(-50%)', // 居中显示\r\n          width: '320px',\r\n          background: '#2a2d3a',\r\n          border: '1px solid #3a3d4a',\r\n          borderRadius: '8px',\r\n          padding: '12px',\r\n          zIndex: 1051, // 提高z-index确保在其他元素之上\r\n          boxShadow: '0 6px 16px rgba(0, 0, 0, 0.25)',\r\n          maxHeight: '400px', // 限制最大高度\r\n          overflowY: 'auto' // 内容过多时可滚动\r\n        }}>\r\n          {/* 搜索历史 */}\r\n          {searchHistory.length > 0 && (\r\n            <div>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '8px' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>\r\n                  <HistoryOutlined style={{ color: '#8b8d97' }} />\r\n                  <span style={{ color: '#8b8d97', fontSize: '12px' }}>搜索历史</span>\r\n                </div>\r\n                <Button \r\n                  type=\"text\" \r\n                  size=\"small\" \r\n                  icon={<DeleteOutlined />} \r\n                  onClick={clearSearchHistory}\r\n                  style={{ color: '#8b8d97', fontSize: '12px' }}\r\n                >\r\n                  清空\r\n                </Button>\r\n              </div>\r\n              <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px', marginBottom: '12px' }}>\r\n                {searchHistory.map((stock) => (\r\n                  <Tag \r\n                    key={stock.code}\r\n                    style={{\r\n                      background: '#3a3d4a',\r\n                      borderColor: '#4a4d5a',\r\n                      color: '#ffffff',\r\n                      cursor: 'pointer',\r\n                      padding: '4px 8px',\r\n                      borderRadius: '4px'\r\n                    }}\r\n                    onClick={() => selectFromHistory(stock)}\r\n                  >\r\n                    {stock.name} ({stock.code})\r\n                  </Tag>\r\n                ))}\r\n              </div>\r\n              <Divider style={{ margin: '8px 0', borderColor: '#3a3d4a' }} />\r\n            </div>\r\n          )}\r\n          \r\n          {/* 热门股票 */}\r\n          <div>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '6px', marginBottom: '8px' }}>\r\n              <FireOutlined style={{ color: '#f59e0b' }} />\r\n              <span style={{ color: '#8b8d97', fontSize: '12px' }}>热门股票</span>\r\n            </div>\r\n            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>\r\n              {HOT_STOCKS.map((stock) => (\r\n                <Tooltip key={stock.code} title={`添加${stock.name}到关注列表`}>\r\n                  <Tag \r\n                    style={{\r\n                      background: '#3a3d4a',\r\n                      borderColor: '#4a4d5a',\r\n                      color: '#ffffff',\r\n                      cursor: 'pointer',\r\n                      padding: '4px 8px',\r\n                      borderRadius: '4px'\r\n                    }}\r\n                    onClick={() => selectHotStock(stock)}\r\n                  >\r\n                    {stock.name} ({stock.code})\r\n                  </Tag>\r\n                </Tooltip>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchBox;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}